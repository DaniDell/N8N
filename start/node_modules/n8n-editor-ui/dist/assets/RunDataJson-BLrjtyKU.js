const __vite__fileDeps=["assets/RunDataJsonActions-CucOcrrR.js","assets/pinia-BAhPp3pQ.js","assets/n8n-B6cfQsVX.js","assets/axios-Mm4CS0gO.js","assets/esprima-next-nhoSXAeq.js","assets/luxon-CLwAIbs0.js","assets/vendor-Dv5OeN6t.js","assets/lodash-es-BxV-E8rt.js","assets/n8n-Dbo88Vem.css","assets/jsonpath-BlCvfu-y.js","assets/index-DEwaaDne.js","assets/flatted-DN8lQ2XG.js","assets/@vueuse/core-9E8Shwsg.js","assets/@n8n/permissions-BxxteU-C.js","assets/dateformat-B9ocXky7.js","assets/vue-i18n-Delvyc9x.js","assets/uuid-SoommWqA.js","assets/@n8n/codemirror-lang-sql-x14jMqbG.js","assets/@lezer/common-B6ct0j_v.js","assets/prettier-bS6l4Vb1.js","assets/@jsplumb/util-DS-9vq_E.js","assets/@jsplumb/core-CVBraiyY.js","assets/@jsplumb/common-CF-b-6-M.js","assets/@jsplumb/connector-bezier-BGU0Ovbw.js","assets/@jsplumb/browser-ui-BVF2KoJK.js","assets/codemirror-lang-html-n8n-DcTmlMkf.js","assets/@n8n/codemirror-lang-Qkdx7NoQ.js","assets/fast-json-stable-stringify-LluJPcs3.js","assets/timeago.js-CiyKClrF.js","assets/qrcode.vue-BGkPba5A.js","assets/vue3-touch-events-mV0oX_Sl.js","assets/chart.js-343vZi4M.js","assets/index-C2bc09x9.css","assets/RunDataJsonActions-BAzswsWH.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{e as b,_ as P}from"./n8n-B6cfQsVX.js";import{V as v}from"./vue-json-pretty-4sRLvjgA.js";import{D as _}from"./NodeView-_cMwqhWw.js";import{eq as J,j,K as k,aG as S,s as w,ep as M,bg as N,a3 as $}from"./index-DEwaaDne.js";import{m as E}from"./pinia-BAhPp3pQ.js";import{M as A,_ as R}from"./TextWithHighlights.vue_vue_type_script_setup_true_lang-D-nZ3pe4.js";import{G as T,r as d,aK as C,ag as o,l as s,m as V,M as r,O as p,R as u,aM as H,U as l,I as m}from"./vendor-Dv5OeN6t.js";import"./axios-Mm4CS0gO.js";import"./esprima-next-nhoSXAeq.js";import"./luxon-CLwAIbs0.js";import"./lodash-es-BxV-E8rt.js";import"./@jsplumb/core-CVBraiyY.js";import"./@jsplumb/util-DS-9vq_E.js";import"./@jsplumb/common-CF-b-6-M.js";import"./useExecutionDebugging-vMuoV-iO.js";import"./file-saver-B3jMAULB.js";import"./dateFormatter-DfWOmXdP.js";import"./dateformat-B9ocXky7.js";import"./RunDataAi-D3971Kwm.js";import"./flatted-DN8lQ2XG.js";import"./@vueuse/core-9E8Shwsg.js";import"./@n8n/permissions-BxxteU-C.js";import"./vue-i18n-Delvyc9x.js";import"./uuid-SoommWqA.js";import"./@n8n/codemirror-lang-sql-x14jMqbG.js";import"./@lezer/common-B6ct0j_v.js";import"./prettier-bS6l4Vb1.js";import"./@jsplumb/connector-bezier-BGU0Ovbw.js";import"./@jsplumb/browser-ui-BVF2KoJK.js";import"./codemirror-lang-html-n8n-DcTmlMkf.js";import"./@n8n/codemirror-lang-Qkdx7NoQ.js";import"./fast-json-stable-stringify-LluJPcs3.js";import"./timeago.js-CiyKClrF.js";import"./qrcode.vue-BGkPba5A.js";import"./vue3-touch-events-mV0oX_Sl.js";import"./chart.js-343vZi4M.js";import"./useWorkflowActivate-BLjS7M0I.js";import"./nodeCreator.store-DR3dfsvW.js";import"./collaboration.store-zz8xH0zY.js";import"./useViewStacks-BSagsijV.js";const I=C(async()=>await b(()=>import("./RunDataJsonActions-CucOcrrR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33]))),F=T({name:"RunDataJson",components:{VueJsonPretty:v,Draggable:_,RunDataJsonActions:I,MappingPill:A,TextWithHighlights:R},props:{editMode:{type:Object,default:()=>({})},pushRef:{type:String},paneType:{type:String},node:{type:Object,required:!0},inputData:{type:Array,required:!0},mappingEnabled:{type:Boolean},distanceFromActive:{type:Number,required:!0},runIndex:{type:Number},totalRuns:{type:Number},search:{type:String}},setup(){const t=$(),a=d(J),n=d(null),h=d("json");return{externalHooks:t,selectedJsonPath:a,draggingPath:n,displayMode:h}},computed:{...E(k,j),jsonData(){return S(this.inputData)},highlight(){return this.ndvStore.highlightDraggables}},methods:{getShortKey(t){return t?w(t.dataset.name||"",16,2):""},getJsonParameterPath(t){const a=t.replace(/^(\["?\d"?])/,"");return M({nodeName:this.node.name,distanceFromActive:this.distanceFromActive,path:a})},onDragStart(t){t!=null&&t.dataset.path&&(this.draggingPath=t.dataset.path),this.ndvStore.resetMappingTelemetry()},onDragEnd(t){this.draggingPath=null;const a=this.ndvStore.mappingTelemetry,n={src_node_type:this.node.type,src_field_name:t.dataset.name||"",src_nodes_back:this.distanceFromActive,src_run_index:this.runIndex,src_runs_total:this.totalRuns,src_field_nest_level:t.dataset.depth||0,src_view:"json",src_element:t,success:!1,...a};setTimeout(()=>{this.externalHooks.run("runDataJson.onDragEnd",n),this.$telemetry.track("User dragged data for mapping",n,{withPostHog:!0})},1e3)},getContent(t){return N(t)?`"${t}"`:JSON.stringify(t)},getListItemName(t){return t.replace(/^(\["?\d"?]\.?)/g,"")}}}),K="_jsonDisplay_uww64_1",O="_mappable_uww64_19",q="_highlight_uww64_25",B="_dragged_uww64_26",W={jsonDisplay:K,mappable:O,highlight:q,dragged:B};function L(t,a,n,h,G,z){const c=o("RunDataJsonActions"),y=o("MappingPill"),i=o("TextWithHighlights"),f=o("VueJsonPretty"),D=o("Draggable");return s(),V("div",{class:m([t.$style.jsonDisplay,{[t.$style.highlight]:t.highlight}])},[(s(),r(H,null,{default:p(()=>[t.editMode.enabled?u("",!0):(s(),r(c,{key:0,node:t.node,"push-ref":t.pushRef,"display-mode":t.displayMode,"distance-from-active":t.distanceFromActive,"selected-json-path":t.selectedJsonPath,"json-data":t.jsonData,"pane-type":t.paneType},null,8,["node","push-ref","display-mode","distance-from-active","selected-json-path","json-data","pane-type"]))]),_:1})),l(D,{type:"mapping","target-data-key":"mappable",disabled:!t.mappingEnabled,onDragstart:t.onDragStart,onDragend:t.onDragEnd},{preview:p(({canDrop:e,el:g})=>[g?(s(),r(y,{key:0,html:t.getShortKey(g),"can-drop":e},null,8,["html","can-drop"])):u("",!0)]),default:p(()=>[l(f,{data:t.jsonData,deep:10,"show-length":!0,"selected-value":t.selectedJsonPath,"root-path":"","selectable-type":"single",class:"json-data","onUpdate:selectedValue":a[0]||(a[0]=e=>t.selectedJsonPath=e)},{renderNodeKey:p(({node:e})=>[l(i,{content:t.getContent(e.key),search:t.search,"data-target":"mappable","data-value":t.getJsonParameterPath(e.path),"data-name":e.key,"data-path":e.path,"data-depth":e.level,class:m({[t.$style.mappable]:t.mappingEnabled,[t.$style.dragged]:t.draggingPath===e.path})},null,8,["content","search","data-value","data-name","data-path","data-depth","class"])]),renderNodeValue:p(({node:e})=>[isNaN(e.index)?(s(),r(i,{key:0,content:t.getContent(e.content),search:t.search},null,8,["content","search"])):(s(),r(i,{key:1,content:t.getContent(e.content),search:t.search,"data-target":"mappable","data-value":t.getJsonParameterPath(e.path),"data-name":t.getListItemName(e.path),"data-path":e.path,"data-depth":e.level,class:m([{[t.$style.mappable]:t.mappingEnabled,[t.$style.dragged]:t.draggingPath===e.path},"ph-no-capture"])},null,8,["content","search","data-value","data-name","data-path","data-depth","class"]))]),_:1},8,["data","selected-value"])]),_:1},8,["disabled","onDragstart","onDragend"])],2)}const U={$style:W},Ct=P(F,[["render",L],["__cssModules",U]]);export{Ct as default};
//# sourceMappingURL=RunDataJson-BLrjtyKU.js.map
