import{p as C,j as T,b as _,i as h,u as m,P as x,a3 as k,U as y,de as O,df as L,F as M,w as b}from"./index-DEwaaDne.js";import{r as D,aH as H}from"./vendor-Dv5OeN6t.js";function S(){const s=D(!1),d=H(),w=C({router:d}),t=T(),W=_(),u=h(),I=M(),a=m(),r=b(),n=async(i,o,p)=>{s.value=!0;const g=t.nodesIssuesExist;let e=i;if(!e||e===x){if(!await w.saveCurrentWorkflow()){s.value=!1;return}e=t.workflowId}const l=e===t.workflowId,c=t.activeWorkflows.includes(e),f={workflow_id:e,is_active:o,previous_status:c,ndv_input:p==="ndv"};I.track("User set workflow active status",f),k().run("workflowActivate.updateWorkflowActivation",f);try{if(c&&o){a.showMessage({title:r.baseText("workflowActivator.workflowIsActive"),type:"success"}),s.value=!1;return}if(l&&g&&o){a.showMessage({title:r.baseText("workflowActivator.showMessage.activeChangedNodesIssuesExistTrue.title"),message:r.baseText("workflowActivator.showMessage.activeChangedNodesIssuesExistTrue.message"),type:"error"}),s.value=!1;return}await w.updateWorkflow({workflowId:e,active:o},!u.stateIsDirty)}catch(v){const A=o?"activated":"deactivated";a.showError(v,r.baseText("workflowActivator.showError.title",{interpolate:{newStateName:A}})+":"),s.value=!1;return}const E=l?"workflow.activeChangeCurrent":"workflow.activeChange";k().run(E,{workflowId:e,active:o}),s.value=!1,l&&(o&&y(O).value!=="true"?u.openModal(L):await W.fetchPromptsData())};return{activateCurrentWorkflow:async i=>{const o=t.workflowId;return await n(o,!0,i)},updateWorkflowActivation:n,updatingWorkflowActivation:s}}export{S as u};
//# sourceMappingURL=useWorkflowActivate-BLjS7M0I.js.map
