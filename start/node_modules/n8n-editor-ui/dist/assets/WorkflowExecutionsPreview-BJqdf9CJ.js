import{u as T}from"./useExecutionDebugging-vMuoV-iO.js";import{G as E,j as v,V as h,z as B}from"./index-DEwaaDne.js";import{W as U}from"./WorkflowPreview-CLfcNQ-Q.js";import{u as M}from"./useExecutionHelpers-C0lzavRV.js";import{m as L}from"./pinia-BAhPp3pQ.js";import{as as W,_ as z}from"./n8n-B6cfQsVX.js";import{G as R,l as r,m as x,p as c,U as o,I as a,O as t,S as i,T as n,M as d,R as m,ag as u}from"./vendor-Dv5OeN6t.js";import"./axios-Mm4CS0gO.js";import"./flatted-DN8lQ2XG.js";import"./@vueuse/core-9E8Shwsg.js";import"./lodash-es-BxV-E8rt.js";import"./@n8n/permissions-BxxteU-C.js";import"./dateformat-B9ocXky7.js";import"./vue-i18n-Delvyc9x.js";import"./uuid-SoommWqA.js";import"./luxon-CLwAIbs0.js";import"./@n8n/codemirror-lang-sql-x14jMqbG.js";import"./@lezer/common-B6ct0j_v.js";import"./prettier-bS6l4Vb1.js";import"./@jsplumb/util-DS-9vq_E.js";import"./@jsplumb/core-CVBraiyY.js";import"./@jsplumb/common-CF-b-6-M.js";import"./@jsplumb/connector-bezier-BGU0Ovbw.js";import"./@jsplumb/browser-ui-BVF2KoJK.js";import"./codemirror-lang-html-n8n-DcTmlMkf.js";import"./@n8n/codemirror-lang-Qkdx7NoQ.js";import"./esprima-next-nhoSXAeq.js";import"./fast-json-stable-stringify-LluJPcs3.js";import"./timeago.js-CiyKClrF.js";import"./qrcode.vue-BGkPba5A.js";import"./vue3-touch-events-mV0oX_Sl.js";import"./chart.js-343vZi4M.js";import"./dateFormatter-DfWOmXdP.js";const q=R({name:"WorkflowExecutionsPreview",components:{ElDropdown:W,WorkflowPreview:U},props:{execution:{type:Object,required:!0}},setup(){return{executionHelpers:M(),...E(),...T()}},computed:{...L(v),executionId(){return this.$route.params.executionId},executionUIDetails(){return this.execution?this.executionHelpers.getUIDetails(this.execution):null},executionMode(){var e;return((e=this.execution)==null?void 0:e.mode)||""},debugButtonData(){var e;return((e=this.execution)==null?void 0:e.status)==="success"?{text:this.$locale.baseText("executionsList.debug.button.copyToEditor"),type:"secondary"}:{text:this.$locale.baseText("executionsList.debug.button.debugInEditor"),type:"primary"}},isRetriable(){return!!this.execution&&this.executionHelpers.isExecutionRetriable(this.execution)},executionDebugViewName(){return h.EXECUTION_DEBUG},executionPreviewViewName(){return h.EXECUTION_PREVIEW}},methods:{async onDeleteExecution(){await this.confirm(this.$locale.baseText("executionDetails.confirmMessage.message"),this.$locale.baseText("executionDetails.confirmMessage.headline"),{type:"warning",confirmButtonText:this.$locale.baseText("executionDetails.confirmMessage.confirmButtonText"),cancelButtonText:""})===B&&this.$emit("deleteCurrentExecution")},handleRetryClick(e){this.$emit("retryExecution",{execution:this.execution,command:e})},handleStopClick(){this.$emit("stopExecution")},onRetryButtonBlur(e){const p=this.$refs.retryDropdown;p&&e.relatedTarget===null&&p.handleClose()}}}),N="_previewContainer_1qf32_1",V="_executionDetails_1qf32_7",O="_spinner_1qf32_26",P="_running_1qf32_32",S="_waiting_1qf32_37",H="_success_1qf32_41",G="_error_1qf32_45",j="_runningInfo_1qf32_49",F="_runningMessage_1qf32_56",X="_debugLink_1qf32_62",A={previewContainer:N,executionDetails:V,spinner:O,running:P,waiting:S,success:H,error:G,runningInfo:j,runningMessage:F,debugLink:X},J=["data-test-id"],K=c("br",null,null,-1),Q=c("br",null,null,-1),Y={class:"retry-button"};function Z(e,p,te,ne,oe,ie){var k,D,_;const f=u("n8n-spinner"),l=u("n8n-text"),g=u("n8n-button"),y=u("router-link"),w=u("n8n-icon-button"),b=u("el-dropdown-item"),I=u("el-dropdown-menu"),$=u("ElDropdown"),C=u("WorkflowPreview");return((k=e.executionUIDetails)==null?void 0:k.name)==="running"?(r(),x("div",{key:0,class:a(e.$style.runningInfo)},[c("div",{class:a(e.$style.spinner)},[o(f,{type:"ring"})],2),o(l,{class:a(e.$style.runningMessage),color:"text-light"},{default:t(()=>[i(n(e.$locale.baseText("executionDetails.runningMessage")),1)]),_:1},8,["class"]),o(g,{class:"mt-l",type:"tertiary",onClick:e.handleStopClick},{default:t(()=>[i(n(e.$locale.baseText("executionsList.stopExecution")),1)]),_:1},8,["onClick"])],2)):e.executionUIDetails?(r(),x("div",{key:1,class:a(e.$style.previewContainer)},[e.execution?(r(),x("div",{key:0,class:a(e.$style.executionDetails),"data-test-id":`execution-preview-details-${e.executionId}`},[c("div",null,[o(l,{size:"large",color:"text-base",bold:!0,"data-test-id":"execution-time"},{default:t(()=>{var s;return[i(n((s=e.executionUIDetails)==null?void 0:s.startTime),1)]}),_:1}),K,((D=e.executionUIDetails)==null?void 0:D.name)==="running"?(r(),d(f,{key:0,size:"small",class:a([e.$style.spinner,"mr-4xs"])},null,8,["class"])):m("",!0),o(l,{size:"medium",class:a([e.$style.status,e.$style[e.executionUIDetails.name]]),"data-test-id":"execution-preview-label"},{default:t(()=>[i(n(e.executionUIDetails.label),1)]),_:1},8,["class"]),i(" "+n(" ")+" "),e.executionUIDetails.name==="running"?(r(),d(l,{key:1,color:"text-base",size:"medium"},{default:t(()=>{var s;return[i(n(e.$locale.baseText("executionDetails.runningTimeRunning",{interpolate:{time:(s=e.executionUIDetails)==null?void 0:s.runningTime}}))+" | ID#"+n(e.execution.id),1)]}),_:1})):e.executionUIDetails.name!=="waiting"?(r(),d(l,{key:2,color:"text-base",size:"medium","data-test-id":"execution-preview-id"},{default:t(()=>{var s;return[i(n(e.$locale.baseText("executionDetails.runningTimeFinished",{interpolate:{time:((s=e.executionUIDetails)==null?void 0:s.runningTime)??"unknown"}}))+" | ID#"+n(e.execution.id),1)]}),_:1})):((_=e.executionUIDetails)==null?void 0:_.name)==="waiting"?(r(),d(l,{key:3,color:"text-base",size:"medium"},{default:t(()=>[i(" | ID#"+n(e.execution.id),1)]),_:1})):m("",!0),Q,e.execution.mode==="retry"?(r(),d(l,{key:4,color:"text-base",size:"medium"},{default:t(()=>[i(n(e.$locale.baseText("executionDetails.retry"))+" ",1),o(y,{class:a(e.$style.executionLink),to:{name:e.executionPreviewViewName,params:{workflowId:e.execution.workflowId,executionId:e.execution.retryOf}}},{default:t(()=>[i(" #"+n(e.execution.retryOf),1)]),_:1},8,["class","to"])]),_:1})):m("",!0)]),c("div",null,[o(g,{size:"medium",type:e.debugButtonData.type,class:a(e.$style.debugLink)},{default:t(()=>[o(y,{to:{name:e.executionDebugViewName,params:{name:e.execution.workflowId,executionId:e.execution.id}}},{default:t(()=>[c("span",{"data-test-id":"execution-debug-button",onClick:p[0]||(p[0]=(...s)=>e.handleDebugLinkClick&&e.handleDebugLinkClick(...s))},n(e.debugButtonData.text),1)]),_:1},8,["to"])]),_:1},8,["type","class"]),e.isRetriable?(r(),d($,{key:0,ref:"retryDropdown",trigger:"click",class:"mr-xs",onCommand:e.handleRetryClick},{dropdown:t(()=>[o(I,null,{default:t(()=>[o(b,{command:"current-workflow"},{default:t(()=>[i(n(e.$locale.baseText("executionsList.retryWithCurrentlySavedWorkflow")),1)]),_:1}),o(b,{command:"original-workflow"},{default:t(()=>[i(n(e.$locale.baseText("executionsList.retryWithOriginalWorkflow")),1)]),_:1})]),_:1})]),default:t(()=>[c("span",Y,[o(w,{size:"medium",type:"tertiary",title:e.$locale.baseText("executionsList.retryExecution"),icon:"redo","data-test-id":"execution-preview-retry-button",onBlur:e.onRetryButtonBlur},null,8,["title","onBlur"])])]),_:1},8,["onCommand"])):m("",!0),o(w,{title:e.$locale.baseText("executionDetails.deleteExecution"),icon:"trash",size:"medium",type:"tertiary","data-test-id":"execution-preview-delete-button",onClick:e.onDeleteExecution},null,8,["title","onClick"])])],10,J)):m("",!0),o(C,{mode:"execution","loader-type":"spinner","execution-id":e.executionId,"execution-mode":e.executionMode},null,8,["execution-id","execution-mode"])],2)):m("",!0)}const ee={$style:A},Ne=z(q,[["render",Z],["__cssModules",ee]]);export{Ne as default};
//# sourceMappingURL=WorkflowExecutionsPreview-BJqdf9CJ.js.map
