import{A as i}from"./AuthView-Bpw90ooz.js";import{u as a,a as m,b as n}from"./index-DEwaaDne.js";import{m as p}from"./pinia-BAhPp3pQ.js";import{G as l,l as c,M as u,ag as d}from"./vendor-Dv5OeN6t.js";import{_ as f}from"./n8n-B6cfQsVX.js";import"./axios-Mm4CS0gO.js";import"./flatted-DN8lQ2XG.js";import"./@vueuse/core-9E8Shwsg.js";import"./lodash-es-BxV-E8rt.js";import"./@n8n/permissions-BxxteU-C.js";import"./dateformat-B9ocXky7.js";import"./vue-i18n-Delvyc9x.js";import"./uuid-SoommWqA.js";import"./luxon-CLwAIbs0.js";import"./@n8n/codemirror-lang-sql-x14jMqbG.js";import"./@lezer/common-B6ct0j_v.js";import"./prettier-bS6l4Vb1.js";import"./@jsplumb/util-DS-9vq_E.js";import"./@jsplumb/core-CVBraiyY.js";import"./@jsplumb/common-CF-b-6-M.js";import"./@jsplumb/connector-bezier-BGU0Ovbw.js";import"./@jsplumb/browser-ui-BVF2KoJK.js";import"./codemirror-lang-html-n8n-DcTmlMkf.js";import"./@n8n/codemirror-lang-Qkdx7NoQ.js";import"./esprima-next-nhoSXAeq.js";import"./fast-json-stable-stringify-LluJPcs3.js";import"./timeago.js-CiyKClrF.js";import"./qrcode.vue-BGkPba5A.js";import"./vue3-touch-events-mV0oX_Sl.js";import"./chart.js-343vZi4M.js";const g=l({name:"ForgotMyPasswordView",components:{AuthView:i},setup(){return{...a()}},data(){return{loading:!1}},computed:{...p(n,m),formConfig(){const t=[{name:"email",properties:{label:this.$locale.baseText("auth.email"),type:"email",required:!0,validationRules:[{name:"VALID_EMAIL"}],autocomplete:"email",capitalize:!0}}],o=[{name:"no-smtp-warning",properties:{label:this.$locale.baseText("forgotPassword.noSMTPToSendEmailWarning"),type:"info"}}],e={title:this.$locale.baseText("forgotPassword.recoverPassword"),redirectText:this.$locale.baseText("forgotPassword.returnToSignIn"),redirectLink:"/signin"};return this.settingsStore.isSmtpSetup?{...e,buttonText:this.$locale.baseText("forgotPassword.getRecoveryLink"),inputs:t}:{...e,inputs:o}}},methods:{async onSubmit(t){try{this.loading=!0,await this.usersStore.sendForgotPasswordEmail(t),this.showMessage({type:"success",title:this.$locale.baseText("forgotPassword.recoveryEmailSent"),message:this.$locale.baseText("forgotPassword.emailSentIfExists",{interpolate:{email:t.email}})})}catch(o){let e=this.$locale.baseText("forgotPassword.smtpErrorContactAdministrator");if(o.httpStatusCode){const{httpStatusCode:s}=o;s===429?e=this.$locale.baseText("forgotPassword.tooManyRequests"):o.httpStatusCode===422&&(e=this.$locale.baseText(o.message)),this.showMessage({type:"error",title:this.$locale.baseText("forgotPassword.sendingEmailError"),message:e})}}this.loading=!1}}});function h(t,o,e,s,S,w){const r=d("AuthView");return c(),u(r,{form:t.formConfig,"form-loading":t.loading,onSubmit:t.onSubmit},null,8,["form","form-loading","onSubmit"])}const K=f(g,[["render",h]]);export{K as default};
//# sourceMappingURL=ForgotMyPasswordView-n_x-L3AV.js.map
