import{_ as L,b as Z}from"./n8n-B6cfQsVX.js";import{l as h,m as T,U as r,p as b,I as a,ag as m,G as R,e as x,O as i,S as E,T as _,u as n,R as $,r as j,aH as H,M as I,J as ee,n as q,b as te,F as se,a7 as oe,a9 as ae}from"./vendor-Dv5OeN6t.js";import{N as U,i as O,O as ne,Q as le,R as G,l as F,U as re,w as W,F as ie,X as ce,n as Y,u as K,r as z,C as ue,Y as de,Z as pe,o as me,V as M,_ as ge,d as be,G as he,$ as _e,j as fe,a0 as Ce,a as Se,b as ve,a1 as ye,a2 as Te,a3 as ke}from"./index-DEwaaDne.js";import{d as xe,m as Ee}from"./pinia-BAhPp3pQ.js";import{D}from"./luxon-CLwAIbs0.js";import"./axios-Mm4CS0gO.js";import"./esprima-next-nhoSXAeq.js";import"./lodash-es-BxV-E8rt.js";import"./flatted-DN8lQ2XG.js";import"./@vueuse/core-9E8Shwsg.js";import"./@n8n/permissions-BxxteU-C.js";import"./dateformat-B9ocXky7.js";import"./vue-i18n-Delvyc9x.js";import"./uuid-SoommWqA.js";import"./@n8n/codemirror-lang-sql-x14jMqbG.js";import"./@lezer/common-B6ct0j_v.js";import"./prettier-bS6l4Vb1.js";import"./@jsplumb/util-DS-9vq_E.js";import"./@jsplumb/core-CVBraiyY.js";import"./@jsplumb/common-CF-b-6-M.js";import"./@jsplumb/connector-bezier-BGU0Ovbw.js";import"./@jsplumb/browser-ui-BVF2KoJK.js";import"./codemirror-lang-html-n8n-DcTmlMkf.js";import"./@n8n/codemirror-lang-Qkdx7NoQ.js";import"./fast-json-stable-stringify-LluJPcs3.js";import"./timeago.js-CiyKClrF.js";import"./qrcode.vue-BGkPba5A.js";import"./vue3-touch-events-mV0oX_Sl.js";import"./chart.js-343vZi4M.js";const $e="_notification_197jx_8",we={"gift-icon":"_gift-icon_197jx_1",notification:$e},Me={},Pe=b("div",null,null,-1),Ie=[Pe];function Ae(e,t){const u=m("font-awesome-icon");return h(),T("div",{class:a(e.$style["gift-icon"])},[r(u,{icon:"gift"}),b("div",{class:a(e.$style.notification)},Ie,2)],2)}const Ne={$style:we},Be=L(Me,[["render",Ae],["__cssModules",Ne]]),Ue=["value","max"],De=8,Le=R({__name:"ExecutionsUsage",props:{cloudPlanData:{}},setup(e){const t=e,u=D.utc(),d=x(()=>{const{days:o=0}=l().diff(u,["days"]).toObject();return Math.ceil(o)}),p=x(()=>{var f;if(!((f=t.cloudPlanData)!=null&&f.expirationDate))return!1;const o=D.fromISO(t.cloudPlanData.expirationDate);return u.toMillis()>o.toMillis()}),l=()=>{var o;return D.fromISO(((o=t==null?void 0:t.cloudPlanData)==null?void 0:o.expirationDate)??"")},c=x(()=>{var o;return(o=t.cloudPlanData)!=null&&o.usage?t.cloudPlanData.usage.executions<t.cloudPlanData.monthlyExecutionsLimit:0}),y=x(()=>{var s;if(!((s=t.cloudPlanData)!=null&&s.usage))return 0;const o=t.cloudPlanData.usage.executions,f=t.cloudPlanData.monthlyExecutionsLimit;return o>f?f:o}),k=x(()=>{var C;if(!((C=t.cloudPlanData)!=null&&C.usage))return 0;const o=t.cloudPlanData.usage.executions,f=t.cloudPlanData.monthlyExecutionsLimit,s=De*f/100;return o<s?s:o}),w=x(()=>{var o;return(o=t.cloudPlanData)!=null&&o.monthlyExecutionsLimit?t.cloudPlanData.monthlyExecutionsLimit:0}),P=()=>{O().goToUpgrade("canvas-nav","upgrade-canvas-nav","redirect")};return(o,f)=>{const s=m("n8n-text"),C=m("i18n-t"),S=m("n8n-button");return h(),T("div",{class:a(o.$style.container)},[p.value?(h(),T("div",{key:0,class:a(o.$style.usageText)},[r(s,{size:"small",color:"danger"},{default:i(()=>[E(_(n(U).baseText("executionUsage.expired.text")),1)]),_:1})],2)):!p.value&&c.value?(h(),T("div",{key:1,class:a(o.$style.usageText)},[r(C,{tag:"span",keypath:"executionUsage.currentUsage"},{text:i(()=>[r(s,{size:"small",color:"text-dark"},{default:i(()=>[E(_(n(U).baseText("executionUsage.currentUsage.text")),1)]),_:1})]),count:i(()=>[r(s,{size:"small",bold:!0,color:"warning"},{default:i(()=>[E(_(n(U).baseText("executionUsage.currentUsage.count",{adjustToNumber:d.value||0})),1)]),_:1})]),_:1})],2)):c.value?$("",!0):(h(),T("div",{key:2,class:a(o.$style.usageText)},[r(s,{size:"small"},{default:i(()=>[E(_(n(U).baseText("executionUsage.ranOutOfExecutions.text")),1)]),_:1})],2)),p.value?$("",!0):(h(),T("div",{key:3,class:a(o.$style.usageCounter)},[b("div",{class:a(o.$style.progressBarDiv)},[b("progress",{class:a([c.value?o.$style.progressBarSuccess:o.$style.progressBarDanger,o.$style.progressBar]),value:k.value,max:w.value},null,10,Ue)],2),b("div",{class:a(o.$style.executionsCountSection)},[r(s,{size:"xsmall",color:c.value?"text-dark":"danger"},{default:i(()=>[E(_(y.value)+"/"+_(w.value),1)]),_:1},8,["color"]),r(s,{size:"xsmall",color:c.value?"text-dark":"danger"},{default:i(()=>[E(_(n(U).baseText("executionUsage.label.executions")),1)]),_:1},8,["color"])],2)],2)),b("div",{class:a(o.$style.upgradeButtonSection)},[r(S,{label:n(U).baseText("executionUsage.button.upgrade"),size:"xmini",icon:"gem",type:"success",block:!0,onClick:P},null,8,["label"])],2)],2)}}}),je="_container_19ive_1",Re="_progressBarDiv_19ive_9",Oe="_progressBar_19ive_9",ze="_progressBarSuccess_19ive_38",We="_progressBarDanger_19ive_48",Ve="_usageText_19ive_57",He="_usageCounter_19ive_64",qe="_danger_19ive_73",Ge="_executionsCountSection_19ive_77",Fe="_upgradeButtonSection_19ive_81",Ye={container:je,progressBarDiv:Re,progressBar:Oe,progressBarSuccess:ze,progressBarDanger:We,usageText:Ve,usageCounter:He,danger:qe,executionsCountSection:Ge,upgradeButtonSection:Fe},Ke={$style:Ye},Je=L(Le,[["__cssModules",Ke]]);async function Qe(e){return await ne(e.baseUrl,"/cta/become-creator")}const Xe="N8N_BECOME_TEMPLATE_CREATOR_CTA_DISMISSED_AT",Ze=30,et=15*60*1e3,J=xe(le.BECOME_TEMPLATE_CREATOR,()=>{const e=G(),t=F(),u=re(Xe),d=j(!1),p=j(null),l=x(()=>u.value?!tt(u.value):!1),c=x(()=>d.value&&!e.userIsTrialing&&!l.value),y=()=>{u.value=D.now().toISO()},k=async()=>{const f=await Qe(t.getRestApiContext);d.value=f},w=async()=>{l.value||e.userIsTrialing||d.value||await k()};return{showBecomeCreatorCta:c,dismissCta:y,startMonitoringCta:()=>{p.value||(setTimeout(w,1e3),p.value=setInterval(w,et))},stopMonitoringCta:()=>{p.value&&(clearInterval(p.value),p.value=null)}}});function tt(e){return D.fromISO(e).plus({days:Ze})<=D.now()}const st=R({__name:"BecomeTemplateCreatorCta",setup(e){const t=W(),u=J(),d=ie(),p=()=>{d.track("User clicked become creator CTA")};return(l,c)=>{const y=m("n8n-icon"),k=m("n8n-button");return n(u).showBecomeCreatorCta?(h(),T("div",{key:0,class:a(l.$style.container),"data-test-id":"become-template-creator-cta"},[b("div",{class:a(l.$style.textAndCloseButton)},[b("p",{class:a(l.$style.text)},_(n(t).baseText("becomeCreator.text")),3),b("button",{class:a(l.$style.closeButton),"data-test-id":"close-become-template-creator-cta",onClick:c[0]||(c[0]=w=>n(u).dismissCta())},[r(y,{icon:"times",size:"xsmall",title:n(t).baseText("generic.close")},null,8,["title"])],2)],2),r(k,{class:a(l.$style.becomeCreatorButton),label:n(t).baseText("becomeCreator.buttonText"),size:"xmini",type:"secondary",element:"a",href:"https://creators.n8n.io/hub",target:"_blank",onClick:p},null,8,["class","label"])],2)):$("",!0)}}}),ot="_container_92ffs_1",at="_textAndCloseButton_92ffs_9",nt="_text_92ffs_9",lt="_closeButton_92ffs_22",rt="_becomeCreatorButton_92ffs_35",it={container:ot,textAndCloseButton:at,text:nt,closeButton:lt,becomeCreatorButton:rt},ct={$style:it},ut=L(st,[["__cssModules",ct]]),dt=R({__name:"MainSidebarSourceControl",props:{isCollapsed:{type:Boolean}},setup(e){const t={CONFLICT:409};H();const u=ce(),d=O(),p=Y(),l=K(),c=W(),y=Z(),k=j(300),w=x(()=>p.preferences.branchName),P=x(()=>p.isEnterpriseSourceControlEnabled&&z(["rbac"],{rbac:{scope:"sourceControl:manage"}}));async function o(){u.startLoading(),u.setLoadingText(c.baseText("settings.sourceControl.loading.checkingForChanges"));try{const s=await p.getAggregatedStatus();d.openModalWithData({name:ue,data:{eventBus:y,status:s}})}catch(s){l.showError(s,c.baseText("error"))}finally{u.stopLoading(),u.setLoadingText(c.baseText("genericHelpers.loading"))}}async function f(){u.startLoading(),u.setLoadingText(c.baseText("settings.sourceControl.loading.pull"));try{const s=await p.pullWorkfolder(!1)||[];if(s.filter(S=>!(S.type==="workflow"&&S.status==="created"&&S.location==="local")).length===0)l.showMessage({title:c.baseText("settings.sourceControl.pull.upToDate.title"),message:c.baseText("settings.sourceControl.pull.upToDate.description"),type:"success"});else{l.showMessage({title:c.baseText("settings.sourceControl.pull.success.title"),type:"success"});const S=["variables","credential"];(s||[]).some(g=>S.includes(g.type))&&q(()=>{l.showMessage({message:c.baseText("settings.sourceControl.pull.oneLastStep.description"),title:c.baseText("settings.sourceControl.pull.oneLastStep.title"),type:"info",duration:0,showClose:!0,offset:0})})}de.emit("pull")}catch(s){const C=s.response;(C==null?void 0:C.status)===t.CONFLICT?d.openModalWithData({name:pe,data:{eventBus:y,status:C.data.data}}):l.showError(s,"Error")}finally{u.stopLoading(),u.setLoadingText(c.baseText("genericHelpers.loading"))}}return(s,C)=>{const S=m("n8n-icon"),A=m("n8n-button"),g=m("n8n-tooltip");return P.value?(h(),T("div",{key:0,class:a({[s.$style.sync]:!0,[s.$style.collapsed]:s.isCollapsed,[s.$style.isConnected]:n(p).isEnterpriseSourceControlEnabled}),style:ee({borderLeftColor:n(p).preferences.branchColor}),"data-test-id":"main-sidebar-source-control"},[n(p).preferences.connected&&n(p).preferences.branchName?(h(),T("div",{key:0,class:a(s.$style.connected),"data-test-id":"main-sidebar-source-control-connected"},[b("span",{class:a(s.$style.branchName)},[r(S,{icon:"code-branch"}),E(" "+_(w.value),1)],2),b("div",{class:a({"pt-xs":!s.isCollapsed})},[r(g,{disabled:!s.isCollapsed,"show-after":k.value,placement:"right"},{content:i(()=>[b("div",null,_(n(c).baseText("settings.sourceControl.button.pull")),1)]),default:i(()=>[r(A,{class:a({"mr-2xs":!s.isCollapsed,"mb-2xs":s.isCollapsed&&!n(p).preferences.branchReadOnly}),icon:"arrow-down",type:"tertiary",size:"mini",square:s.isCollapsed,label:s.isCollapsed?"":n(c).baseText("settings.sourceControl.button.pull"),onClick:f},null,8,["class","square","label"])]),_:1},8,["disabled","show-after"]),n(p).preferences.branchReadOnly?$("",!0):(h(),I(g,{key:0,disabled:!s.isCollapsed,"show-after":k.value,placement:"right"},{content:i(()=>[b("div",null,_(n(c).baseText("settings.sourceControl.button.push")),1)]),default:i(()=>[r(A,{square:s.isCollapsed,label:s.isCollapsed?"":n(c).baseText("settings.sourceControl.button.push"),icon:"arrow-up",type:"tertiary",size:"mini",onClick:o},null,8,["square","label"])]),_:1},8,["disabled","show-after"]))],2)],2)):$("",!0)],6)):$("",!0)}}}),pt="_sync_15zv3_1",mt="_isConnected_15zv3_8",gt="_collapsed_15zv3_12",bt="_branchName_15zv3_22",ht="_connected_15zv3_32",_t={sync:pt,isConnected:mt,collapsed:gt,branchName:bt,connected:ht},ft={$style:_t},Ct=L(dt,[["__cssModules",ft]]),St={key:0,class:"mt-m mb-m"},vt={key:2,class:"mt-m mb-m"},yt=R({__name:"ProjectNavigation",props:{collapsed:{type:Boolean},planName:{}},setup(e){const t=e,u=H(),d=W(),p=K(),l=me(),c=O(),y=j(!1),k=j(!1),w=x(()=>({id:"home",label:d.baseText("projects.menu.home"),icon:"home",route:{to:{name:M.HOMEPAGE}}})),P=x(()=>({id:"addProject",label:d.baseText("projects.menu.addProject"),icon:"plus",disabled:!k.value||y.value||!l.canCreateProjects,isLoading:y.value})),o=g=>({id:g.id,label:g.name,route:{to:{name:M.PROJECTS_WORKFLOWS,params:{projectId:g.id}}}}),f=()=>{},s=()=>{},C=async()=>{y.value=!0;try{const g=await l.createProject({name:d.baseText("projects.settings.newProjectName")});await u.push({name:M.PROJECT_SETTINGS,params:{projectId:g.id}}),p.showMessage({title:d.baseText("projects.settings.save.successful.title",{interpolate:{projectName:g.name??""}}),type:"success"})}catch(g){p.showError(g,d.baseText("projects.error.title"))}finally{y.value=!1}},S=x(()=>l.myProjects.filter(g=>g.type==="team").toSorted((g,N)=>!g.name||!N.name?0:g.name>N.name?1:g.name<N.name?-1:0)),A=async()=>{await c.goToUpgrade("rbac","upgrade-rbac")};return te(async()=>{await q(),k.value=!0}),(g,N)=>{const v=m("N8nMenuItem"),B=m("ElMenu"),Q=m("i18n-t"),X=m("N8nTooltip");return h(),T("div",{class:a(g.$style.projects)},[r(B,{collapse:t.collapsed,class:"home"},{default:i(()=>[r(v,{item:w.value,compact:t.collapsed,"handle-select":f,"active-tab":n(l).projectNavActiveId,mode:"tabs","data-test-id":"project-home-menu-item"},null,8,["item","compact","active-tab"])]),_:1},8,["collapse"]),S.value.length||n(l).hasPermissionToCreateProjects&&n(l).teamProjectsAvailable?(h(),T("hr",St)):$("",!0),S.value.length?(h(),I(B,{key:1,collapse:t.collapsed,class:a(g.$style.projectItems)},{default:i(()=>[(h(!0),T(se,null,oe(S.value,V=>(h(),I(v,{key:V.id,item:o(V),compact:t.collapsed,"handle-select":s,"active-tab":n(l).projectNavActiveId,mode:"tabs","data-test-id":"project-menu-item"},null,8,["item","compact","active-tab"]))),128))]),_:1},8,["collapse","class"])):$("",!0),r(X,{placement:"right",disabled:n(l).canCreateProjects},{content:i(()=>[r(Q,{keypath:"projects.create.limitReached"},{planName:i(()=>[E(_(t.planName),1)]),limit:i(()=>[E(_(n(d).baseText("projects.create.limit",{adjustToNumber:n(l).teamProjectsLimit,interpolate:{num:String(n(l).teamProjectsLimit)}})),1)]),link:i(()=>[b("a",{class:a(g.$style.upgradeLink),href:"#",onClick:A},_(n(d).baseText("projects.create.limitReached.link")),3)]),_:1})]),default:i(()=>[n(l).hasPermissionToCreateProjects&&n(l).teamProjectsAvailable?(h(),I(B,{key:0,collapse:t.collapsed,class:"pl-xs pr-xs"},{default:i(()=>[r(v,{item:P.value,compact:t.collapsed,"handle-select":C,mode:"tabs","data-test-id":"add-project-menu-item"},null,8,["item","compact"])]),_:1},8,["collapse"])):$("",!0)]),_:1},8,["disabled"]),S.value.length||n(l).hasPermissionToCreateProjects&&n(l).teamProjectsAvailable?(h(),T("hr",vt)):$("",!0)],2)}}}),Tt="_projects_7ap69_1",kt="_projectItems_7ap69_9",xt="_upgradeLink_7ap69_15",Et={projects:Tt,projectItems:kt,upgradeLink:xt},$t={$style:Et},wt=L(yt,[["__cssModules",$t],["__scopeId","data-v-cc7001f7"]]),Mt=R({name:"MainSidebar",components:{GiftNotificationIcon:Be,ExecutionsUsage:Je,MainSidebarSourceControl:Ct,BecomeTemplateCreatorCta:ut,ProjectNavigation:wt},mixins:[ge],setup(){const e=ke(),{callDebounced:t}=be();return{externalHooks:e,callDebounced:t,...he()}},data(){return{basePath:"",fullyExpanded:!1}},computed:{...Ee(F,ve,O,Se,Ce,fe,G,Y,J,_e),logoPath(){return this.basePath+(this.isCollapsed?"static/logo/collapsed.svg":this.uiStore.logo)},hasVersionUpdates(){return this.settingsStore.settings.releaseChannel==="stable"&&this.versionsStore.hasVersionUpdates},nextVersions(){return this.versionsStore.nextVersions},isCollapsed(){return this.uiStore.sidebarMenuCollapsed},canUserAccessSettings(){return this.findFirstAccessibleSettingsRoute()!==null},showUserArea(){return z(["authenticated"])},workflowExecution(){return this.workflowsStore.getWorkflowExecution},userMenuItems(){return[{id:"settings",label:this.$locale.baseText("settings")},{id:"logout",label:this.$locale.baseText("auth.signout")}]},mainMenuItems(){const e=[],t=this.findFirstAccessibleSettingsRoute(),u=[{id:"cloud-admin",position:"bottom",label:"Admin Panel",icon:"cloud",available:this.settingsStore.isCloudDeployment&&z(["instanceOwner"])},{id:"templates",icon:"box-open",label:this.$locale.baseText("mainSidebar.templates"),position:"bottom",available:this.settingsStore.isTemplatesEnabled&&this.templatesStore.hasCustomTemplatesHost,route:{to:{name:M.TEMPLATES}}},{id:"templates",icon:"box-open",label:this.$locale.baseText("mainSidebar.templates"),position:"bottom",available:this.settingsStore.isTemplatesEnabled&&!this.templatesStore.hasCustomTemplatesHost,link:{href:this.templatesStore.websiteTemplateRepositoryURL,target:"_blank"}},{id:"variables",icon:"variable",label:this.$locale.baseText("mainSidebar.variables"),customIconSize:"medium",position:"bottom",route:{to:{name:M.VARIABLES}}},{id:"executions",icon:"tasks",label:this.$locale.baseText("mainSidebar.executions"),position:"bottom",route:{to:{name:M.EXECUTIONS}}},{id:"settings",icon:"cog",label:this.$locale.baseText("settings"),position:"bottom",available:this.canUserAccessSettings&&this.usersStore.currentUser!==null,activateOnRouteNames:[M.USERS_SETTINGS,M.API_SETTINGS,M.PERSONAL_SETTINGS],route:{to:t}},{id:"help",icon:"question",label:"Help",position:"bottom",children:[{id:"quickstart",icon:"video",label:this.$locale.baseText("mainSidebar.helpMenuItems.quickstart"),link:{href:"https://www.youtube.com/watch?v=1MwSoB0gnM4",target:"_blank"}},{id:"docs",icon:"book",label:this.$locale.baseText("mainSidebar.helpMenuItems.documentation"),link:{href:"https://docs.n8n.io?utm_source=n8n_app&utm_medium=app_sidebar",target:"_blank"}},{id:"forum",icon:"users",label:this.$locale.baseText("mainSidebar.helpMenuItems.forum"),link:{href:"https://community.n8n.io?utm_source=n8n_app&utm_medium=app_sidebar",target:"_blank"}},{id:"examples",icon:"graduation-cap",label:this.$locale.baseText("mainSidebar.helpMenuItems.course"),link:{href:"https://www.youtube.com/watch?v=1MwSoB0gnM4",target:"_blank"}},{id:"about",icon:"info",label:this.$locale.baseText("mainSidebar.aboutN8n"),position:"bottom"}]}];return[...e,...u]},userIsTrialing(){return this.cloudPlanStore.userIsTrialing},currentPlanAndUsageData(){const e=this.cloudPlanStore.currentPlanData,t=this.cloudPlanStore.currentUsageData;return!e||!t?null:{...e,usage:t}}},async mounted(){this.basePath=this.rootStore.baseUrl,this.$refs.user&&this.externalHooks.run("mainSidebar.mounted",{userRef:this.$refs.user}),this.$nextTick(()=>{window.innerWidth<900||this.uiStore.isNodeView?this.uiStore.sidebarMenuCollapsed=!0:this.uiStore.sidebarMenuCollapsed=!1,this.fullyExpanded=!this.isCollapsed}),this.becomeTemplateCreatorStore.startMonitoringCta()},created(){window.addEventListener("resize",this.onResize)},beforeUnmount(){this.becomeTemplateCreatorStore.stopMonitoringCta(),window.removeEventListener("resize",this.onResize)},methods:{trackHelpItemClick(e){this.$telemetry.track("User clicked help resource",{type:e,workflow_id:this.workflowsStore.workflowId})},trackTemplatesClick(){var e;this.$telemetry.track("User clicked on templates",{role:(e=this.usersStore.currentUserCloudInfo)==null?void 0:e.role,active_workflow_count:this.workflowsStore.activeWorkflows.length})},async onUserActionToggle(e){switch(e){case"logout":this.onLogout();break;case"settings":this.$router.push({name:M.PERSONAL_SETTINGS});break}},onLogout(){this.$router.push({name:M.SIGNOUT})},toggleCollapse(){this.uiStore.toggleSidebarMenuCollapse(),this.isCollapsed?this.fullyExpanded=!this.isCollapsed:setTimeout(()=>{this.fullyExpanded=!this.isCollapsed},300)},openUpdatesPanel(){this.uiStore.openModal(ye)},async handleSelect(e){switch(e){case"templates":this.settingsStore.isTemplatesEnabled&&!this.templatesStore.hasCustomTemplatesHost&&this.trackTemplatesClick();break;case"about":{this.trackHelpItemClick("about"),this.uiStore.openModal(Te);break}case"cloud-admin":{this.cloudPlanStore.redirectToDashboard();break}case"quickstart":case"docs":case"forum":case"examples":{this.trackHelpItemClick(e);break}}},findFirstAccessibleSettingsRoute(){var u;const e=(u=this.$router.getRoutes().find(d=>d.path==="/settings"))==null?void 0:u.children.map(d=>d.name??"");let t={name:M.USERS_SETTINGS};for(const d of e??[])if(this.canUserAccessRouteByName(d.toString())){t={name:d.toString()};break}return t},onResize(e){this.callDebounced(this.onResizeEnd,{debounceTime:100},e)},async onResizeEnd(e){const t=e.target.outerWidth;await this.checkWidthAndAdjustSidebar(t)},async checkWidthAndAdjustSidebar(e){e<900&&(this.uiStore.sidebarMenuCollapsed=!0,await this.$nextTick(),this.fullyExpanded=!this.isCollapsed)}}}),Pt="_sideMenu_1qnza_1",It="_logo_1qnza_8",At="_sideMenuCollapsed_1qnza_19",Nt="_sideMenuCollapseButton_1qnza_26",Bt="_updates_1qnza_45",Ut="_expanded_1qnza_58",Dt="_userArea_1qnza_65",Lt="_userName_1qnza_72",jt="_userActions_1qnza_86",Rt={sideMenu:Pt,logo:It,sideMenuCollapsed:At,sideMenuCollapseButton:Nt,updates:Bt,expanded:Ut,userArea:Dt,userName:Lt,userActions:jt},Ot=["src"],zt={class:"ml-3xs","data-test-id":"main-sidebar-user-menu"};function Wt(e,t,u,d,p,l){const c=m("n8n-icon"),y=m("ProjectNavigation"),k=m("BecomeTemplateCreatorCta"),w=m("ExecutionsUsage"),P=m("GiftNotificationIcon"),o=m("n8n-text"),f=m("MainSidebarSourceControl"),s=m("n8n-avatar"),C=m("el-dropdown-item"),S=m("el-dropdown-menu"),A=m("el-dropdown"),g=m("n8n-action-dropdown"),N=m("n8n-menu");return h(),T("div",{id:"side-menu",class:a({"side-menu":!0,[e.$style.sideMenu]:!0,[e.$style.sideMenuCollapsed]:e.isCollapsed})},[b("div",{id:"collapse-change-button",class:a(["clickable",e.$style.sideMenuCollapseButton]),onClick:t[0]||(t[0]=(...v)=>e.toggleCollapse&&e.toggleCollapse(...v))},[e.isCollapsed?(h(),I(c,{key:0,icon:"chevron-right",size:"xsmall",class:"ml-5xs"})):(h(),I(c,{key:1,icon:"chevron-left",size:"xsmall",class:"mr-5xs"}))],2),r(N,{items:e.mainMenuItems,collapsed:e.isCollapsed,onSelect:e.handleSelect},ae({header:i(()=>{var v;return[b("div",{class:a(e.$style.logo)},[b("img",{src:e.logoPath,"data-test-id":"n8n-logo",class:a(e.$style.icon),alt:"n8n"},null,10,Ot)],2),r(y,{collapsed:e.isCollapsed,"plan-name":(v=e.cloudPlanStore.currentPlanData)==null?void 0:v.displayName},null,8,["collapsed","plan-name"])]}),beforeLowerMenu:i(()=>[e.fullyExpanded&&!e.userIsTrialing?(h(),I(k,{key:0})):$("",!0),e.fullyExpanded&&e.userIsTrialing?(h(),I(w,{key:1,"cloud-plan-data":e.currentPlanAndUsageData},null,8,["cloud-plan-data"])):$("",!0)]),menuSuffix:i(()=>[b("div",null,[e.hasVersionUpdates?(h(),T("div",{key:0,"data-test-id":"version-updates-panel-button",class:a(e.$style.updates),onClick:t[1]||(t[1]=(...v)=>e.openUpdatesPanel&&e.openUpdatesPanel(...v))},[b("div",{class:a(e.$style.giftContainer)},[r(P)],2),r(o,{class:a({"ml-xs":!0,[e.$style.expanded]:e.fullyExpanded}),color:"text-base"},{default:i(()=>[E(_(e.nextVersions.length>99?"99+":e.nextVersions.length)+" update"+_(e.nextVersions.length>1?"s":""),1)]),_:1},8,["class"])],2)):$("",!0),r(f,{"is-collapsed":e.isCollapsed},null,8,["is-collapsed"])])]),_:2},[e.showUserArea?{name:"footer",fn:i(()=>[b("div",{class:a(e.$style.userArea)},[b("div",zt,[r(A,{disabled:!e.isCollapsed,placement:"right-end",trigger:"click",onCommand:e.onUserActionToggle},{dropdown:i(()=>[r(S,null,{default:i(()=>[r(C,{command:"settings"},{default:i(()=>[E(_(e.$locale.baseText("settings")),1)]),_:1}),r(C,{command:"logout"},{default:i(()=>[E(_(e.$locale.baseText("auth.signout")),1)]),_:1})]),_:1})]),default:i(()=>{var v,B;return[b("div",{class:a({[e.$style.avatar]:!0,clickable:e.isCollapsed})},[r(s,{"first-name":(v=e.usersStore.currentUser)==null?void 0:v.firstName,"last-name":(B=e.usersStore.currentUser)==null?void 0:B.lastName,size:"small"},null,8,["first-name","last-name"])],2)]}),_:1},8,["disabled","onCommand"])]),b("div",{class:a({"ml-2xs":!0,[e.$style.userName]:!0,[e.$style.expanded]:e.fullyExpanded})},[r(o,{size:"small",bold:!0,color:"text-dark"},{default:i(()=>{var v;return[E(_((v=e.usersStore.currentUser)==null?void 0:v.fullName),1)]}),_:1})],2),b("div",{class:a({[e.$style.userActions]:!0,[e.$style.expanded]:e.fullyExpanded})},[r(g,{items:e.userMenuItems,placement:"top-start","data-test-id":"user-menu",onSelect:e.onUserActionToggle},null,8,["items","onSelect"])],2)],2)]),key:"0"}:void 0]),1032,["items","collapsed","onSelect"])],2)}const Vt={$style:Rt},Cs=L(Mt,[["render",Wt],["__cssModules",Vt]]);export{Cs as default};
//# sourceMappingURL=MainSidebar-CAwsaKp9.js.map
