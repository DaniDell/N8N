import{c$ as f,bi as m,V as d,bF as u,d2 as T,d3 as k,d4 as E,bE as y}from"./index-DEwaaDne.js";async function W(e){const{credentialOverrides:t,nodeTypeProvider:o,rootStore:n,template:a,workflowsStore:s}=e,r=await k(n.getRestApiContext,{name:a.name}),l=E(o,a.workflow.nodes,t),i=y(l),w=a.workflow.connections,p={name:r.name,nodes:i,connections:w,active:!1,meta:{templateId:a.id.toString()}};return await s.createNewWorkflow(p)}async function N(e){const{router:t,templateId:o,inNewBrowserTab:n=!1,telemetry:a,source:s}=e;a.track("User opened cred setup",{source:s},{withPostHog:!0});const r={name:d.TEMPLATE_SETUP,params:{id:o}};if(n){const l=t.resolve(r);window.open(l.href,"_blank")}else await t.push(r)}async function c(e){const{externalHooks:t,templateId:o,templatesStore:n,inNewBrowserTab:a,router:s}=e,r={name:d.TEMPLATE_IMPORT,params:{id:o}},l={source:"workflow",template_id:u(o),wf_template_repo_session_id:n.currentSessionId};if(await t.run("templatesWorkflowView.openWorkflow",l),a){const i=s.resolve(r);window.open(i.href,"_blank")}else await s.push(r)}function P(e,t){return t.workflow.nodes.some(o=>T(e,o))}async function S(e,t){const o=e.getFullTemplateById(t);return o||(await e.fetchTemplateById(t),e.getFullTemplateById(t))}async function C(e){const{nodeTypesStore:t,posthogStore:o,templateId:n,templatesStore:a}=e;if(!o.isFeatureEnabled(f)){await c(e);return}const[r]=await Promise.all([S(a,n),t.loadNodeTypesIfNotLoaded()]);m(r),P(t,r)?await N(e):await c(e)}export{W as c,C as u};
//# sourceMappingURL=templateActions-DTyOnhvj.js.map
