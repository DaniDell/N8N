import{u as m,j as g,i as h,dd as A}from"./index-DEwaaDne.js";import{u as T}from"./useWorkflowActivate-BLjS7M0I.js";import{m as b}from"./pinia-BAhPp3pQ.js";import{G as W,l as s,m as d,p as i,M as w,O as e,S as f,T as l,I as y,U as r,P as S,R as _,ag as a,aq as $}from"./vendor-Dv5OeN6t.js";import{_ as N}from"./n8n-B6cfQsVX.js";const C=W({name:"WorkflowActivator",props:["workflowActive","workflowId"],setup(){return{...m(),...T()}},computed:{...b(h,g),nodesIssuesExist(){return this.workflowsStore.nodesIssuesExist},isWorkflowActive(){return this.workflowsStore.activeWorkflows.includes(this.workflowId)},couldNotBeStarted(){return this.workflowActive===!0&&this.isWorkflowActive!==this.workflowActive},getActiveColor(){return this.couldNotBeStarted?"#ff4949":"#13ce66"},isCurrentWorkflow(){return this.workflowsStore.workflowId===this.workflowId},disabled(){return!this.workflowId||this.isCurrentWorkflow?!this.workflowActive&&!this.containsTrigger:!1},containsTrigger(){return A(this.workflowsStore.workflowTriggerNodes).length>0}},methods:{async activeChanged(o){return await this.updateWorkflowActivation(this.workflowId,o)},async displayActivationError(){let o;try{const t=await this.workflowsStore.getActivationError(this.workflowId);t===void 0?o=this.$locale.baseText("workflowActivator.showMessage.displayActivationError.message.errorDataUndefined"):o=this.$locale.baseText("workflowActivator.showMessage.displayActivationError.message.errorDataNotUndefined",{interpolate:{message:t}})}catch{o=this.$locale.baseText("workflowActivator.showMessage.displayActivationError.message.catchBlock")}this.showMessage({title:this.$locale.baseText("workflowActivator.showMessage.displayActivationError.title"),message:o,type:"warning",duration:0,dangerouslyUseHTMLString:!0})}}}),I="_activeStatusText_nj9sv_1",E={activeStatusText:I},M={class:"workflow-activator"},B={key:0,class:"could-not-be-started"},U=["innerHTML"];function D(o,t,x,H,z,L){const n=a("n8n-text"),v=a("el-switch"),c=a("n8n-tooltip"),k=a("font-awesome-icon"),u=$("loading");return s(),d("div",M,[i("div",{class:y(o.$style.activeStatusText),"data-test-id":"workflow-activator-status"},[o.workflowActive?(s(),w(n,{key:0,color:o.couldNotBeStarted?"danger":"success",size:"small",bold:""},{default:e(()=>[f(l(o.$locale.baseText("workflowActivator.active")),1)]),_:1},8,["color"])):(s(),w(n,{key:1,color:"text-base",size:"small",bold:""},{default:e(()=>[f(l(o.$locale.baseText("workflowActivator.inactive")),1)]),_:1}))],2),r(c,{disabled:!o.disabled,placement:"bottom"},{content:e(()=>[i("div",null,l(o.$locale.baseText("workflowActivator.thisWorkflowHasNoTriggerNodes")),1)]),default:e(()=>[S(r(v,{"model-value":o.workflowActive,title:o.workflowActive?o.$locale.baseText("workflowActivator.deactivateWorkflow"):o.$locale.baseText("workflowActivator.activateWorkflow"),disabled:o.disabled||o.updatingWorkflowActivation,"active-color":o.getActiveColor,"inactive-color":"#8899AA","data-test-id":"workflow-activate-switch","onUpdate:modelValue":o.activeChanged},null,8,["model-value","title","disabled","active-color","onUpdate:modelValue"]),[[u,o.updatingWorkflowActivation]])]),_:1},8,["disabled"]),o.couldNotBeStarted?(s(),d("div",B,[r(c,{placement:"top"},{content:e(()=>[i("div",{onClick:t[0]||(t[0]=(...p)=>o.displayActivationError&&o.displayActivationError(...p)),innerHTML:o.$locale.baseText("workflowActivator.theWorkflowIsSetToBeActiveBut")},null,8,U)]),default:e(()=>[r(k,{icon:"exclamation-triangle",onClick:o.displayActivationError},null,8,["onClick"])]),_:1})])):_("",!0)])}const V={$style:E},R=N(C,[["render",D],["__cssModules",V],["__scopeId","data-v-e3b4fb0e"]]);export{R as W};
//# sourceMappingURL=WorkflowActivator-Bh0oXchL.js.map
