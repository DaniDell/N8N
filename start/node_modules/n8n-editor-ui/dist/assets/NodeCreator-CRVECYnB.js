import{N as Xe,dW as re,es as Je,bd as ie,a3 as be,aP as Ze,cv as Qe,et as xe,aa as et,ad as tt,a9 as le,w as pe,bJ as ke,bI as Ae,bK as ce,F as se,an as Le,j as ot,a as nt,bD as te,ee as st,ed as at,cm as ge,eu as rt,l as it,cb as Ee,dg as Re,i as lt,bk as ct,ar as dt,a4 as ut}from"./index-DEwaaDne.js";import{u as Q,t as pt,f as gt}from"./nodeCreator.store-DR3dfsvW.js";import{G as H,l as p,M as C,O as I,H as G,W as Ve,Z as $e,b as ye,y as Me,_ as we,ag as D,m as L,p as N,U as O,I as d,R as V,r as J,e as b,a9 as de,u as z,P as Oe,J as Ce,a2 as me,V as Be,K as oe,T as W,d as Z,ab as Pe,al as yt,Y as De,F as mt,a7 as _t,af as ft,aR as vt,S as ee}from"./vendor-Dv5OeN6t.js";import{_ as U}from"./n8n-B6cfQsVX.js";import{u as P,a as X,T as Ke,R as He,A as Ue,b as ze}from"./useViewStacks-BSagsijV.js";import{m as ht,E as _e,F as qe}from"./lodash-es-BxV-E8rt.js";import{u as Te}from"./NodeCreation-DHuCOx3T.js";import"./pinia-BAhPp3pQ.js";import"./axios-Mm4CS0gO.js";import"./flatted-DN8lQ2XG.js";import"./@vueuse/core-9E8Shwsg.js";import"./@n8n/permissions-BxxteU-C.js";import"./dateformat-B9ocXky7.js";import"./vue-i18n-Delvyc9x.js";import"./uuid-SoommWqA.js";import"./luxon-CLwAIbs0.js";import"./@n8n/codemirror-lang-sql-x14jMqbG.js";import"./@lezer/common-B6ct0j_v.js";import"./prettier-bS6l4Vb1.js";import"./@jsplumb/util-DS-9vq_E.js";import"./@jsplumb/core-CVBraiyY.js";import"./@jsplumb/common-CF-b-6-M.js";import"./@jsplumb/connector-bezier-BGU0Ovbw.js";import"./@jsplumb/browser-ui-BVF2KoJK.js";import"./codemirror-lang-html-n8n-DcTmlMkf.js";import"./@n8n/codemirror-lang-Qkdx7NoQ.js";import"./esprima-next-nhoSXAeq.js";import"./fast-json-stable-stringify-LluJPcs3.js";import"./timeago.js-CiyKClrF.js";import"./qrcode.vue-BGkPba5A.js";import"./vue3-touch-events-mV0oX_Sl.js";import"./chart.js-343vZi4M.js";const bt=H({name:"SlideTransition"});function kt(i,e,u,s,o,v){return p(),C(Ve,{name:"slide"},{default:I(()=>[G(i.$slots,"default",{},void 0,!0)]),_:3})}const $t=U(bt,[["render",kt],["__scopeId","data-v-88e2114c"]]),Ye="placeholder_recommended";function wt(...i){return Xe.baseText(...i)}const x=ht(wt,(...i)=>JSON.stringify(i)),he={"n8n-nodes-base.hubspotTrigger":(i,e)=>{var s,o,v;const u=(s=i==null?void 0:i.options)==null?void 0:s[0];return(v=(o=u==null?void 0:u.values[0])==null?void 0:o.options)==null?void 0:v.map(f=>({...ne(e),actionKey:f.value,displayName:x("nodeCreator.actionsCategory.onEvent",{interpolate:{event:_e(f.name)}}),description:f.description??"",displayOptions:i.displayOptions,values:{eventsUi:{eventValues:[{name:f.value}]}}}))}};function ne(i,e){const u=i.group.includes("trigger"),s=x(u?"nodeCreator.actionsCategory.triggers":"nodeCreator.actionsCategory.actions");return{name:i.name,group:i.group,codex:{label:e??"",categories:[s]},iconUrl:i.iconUrl,outputs:i.outputs,icon:i.icon,defaults:i.defaults}}function Ct(i){if(i.properties.find(o=>o.name==="resource"))return[];const e=i.properties.find(o=>{var v;return((v=o.name)==null?void 0:v.toLowerCase())==="operation"});if(!(e!=null&&e.options))return[];const s=e.options.filter(o=>!["*",""," "].includes(o.name)).map(o=>({...ne(i),actionKey:o.value,displayName:o.action??_e(o.name),description:o.description??"",displayOptions:e.displayOptions,values:{[e.name]:e.type==="multiOptions"?[o.value]:o.value}}));return s.length===0?[]:s}function Tt(i){var y,g;const e=["event","events","trigger on"],u=(y=i.displayName)==null?void 0:y.toLowerCase().includes("trigger"),s=i.properties.find(n=>{var r;return e.includes((r=n.displayName)==null?void 0:r.toLowerCase())});if(!u)return[];if(!(s!=null&&s.options))return[{...ne(i),actionKey:Ye,displayName:x("nodeCreator.actionsCategory.onNewEvent",{interpolate:{event:i.displayName.replace("Trigger","").trimEnd()}}),description:""}];const o=s.options.filter(n=>!["*",""," "].includes(n.name));return((g=he[i.name])==null?void 0:g.call(he,s,i))??o.map(n=>({...ne(i),actionKey:n.value,displayName:n.action??x("nodeCreator.actionsCategory.onEvent",{interpolate:{event:_e(n.name)}}),description:n.description??"",displayOptions:s.displayOptions,values:{[s.name]:s.type==="multiOptions"?[n.value]:n.value}}))}function Nt(i){const e=[];return i.properties.filter(s=>{var o;return((o=s.displayName)==null?void 0:o.toLowerCase())==="resource"}).forEach(s=>{(s.options||[]).filter(o=>o.value!==ie).forEach((o,v,f)=>{const y=f.length===1,g=i.properties.find(r=>{var l,S,_,a,T;const k=r.name==="operation",m=((_=(S=(l=r.displayOptions)==null?void 0:l.show)==null?void 0:S.resource)==null?void 0:_.includes(o.value))??y,t=(T=(a=r.displayOptions)==null?void 0:a.show)==null?void 0:T["@version"],h=Array.isArray(i.version)?i.version:[i.version],B=t?t.some(E=>typeof E=="number"&&h.includes(E)):!0;return k&&m&&B});if(!(g!=null&&g.options))return;const n=(g.options||[]).map(r=>{var t;const k=r.action??`${o.name} ${_e(r.name)}`,m=y?{show:{resource:[(t=f[0])==null?void 0:t.value]}}:g==null?void 0:g.displayOptions;return{...ne(i,`${o.name} ${x("nodeCreator.actionsCategory.actions")}`),actionKey:r.value,description:(r==null?void 0:r.description)??"",displayOptions:m,values:{operation:(g==null?void 0:g.type)==="multiOptions"?[r.value]:r.value},displayName:k,group:["trigger"]}});e.push(...n)})}),e}function It(){function i(o){return o?[...Tt(o),...Ct(o),...Nt(o)]:[]}function e(o){return o.length<=1?[]:o.filter((v,f,y)=>{if(v.actionKey===ie)return!1;const n=v.actionKey===Ye;return!n||n&&y.length>1})}function u(o){const{displayName:v,defaults:f,description:y,name:g,group:n,icon:r,iconUrl:k,badgeIconUrl:m,outputs:t,codex:h}=o;return{displayName:v,defaults:f,description:y,name:g,group:n,icon:r,iconUrl:k,badgeIconUrl:m,outputs:t,codex:h}}function s(o,v){const f=[...o],y={},g=[];return f.filter(n=>!n.group.includes("trigger")).forEach(n=>{const r=i(n);if(y[n.name]=r,n.name===re){const m=v.map(t=>{const h=Je(n,t);return h?u(h):null}).filter(t=>t!==null);g.push(...m)}g.push(u(n))}),f.filter(n=>n.group.includes("trigger")).forEach(n=>{const r=n.name.replace("Trigger",""),k=i(n),m=(y==null?void 0:y[r])||[],t=g.find(h=>h.name===r);if(t&&(m==null?void 0:m.length)>0){const h=e([...m,...k]);y[r]=h,t.description=n.description}else y[n.name]=e(k),g.push(u(n))}),{actions:y,mergedNodes:g}}return{generateMergedNodesAndActions:s}}const St=["placeholder","value"],At=H({__name:"SearchBar",props:{placeholder:{default:""},modelValue:{default:""}},emits:["update:modelValue"],setup(i,{expose:e,emit:u}){const s=u,o=$e({inputRef:null}),v=be();function f(){var r;(r=o.inputRef)==null||r.focus()}function y(r){const k=r.target;s("update:modelValue",k.value)}function g(){s("update:modelValue","")}ye(()=>{v.run("nodeCreatorSearchBar.mount",{inputRef:o.inputRef}),setTimeout(f,0)}),Me(()=>{var r;(r=o.inputRef)==null||r.remove()});const{inputRef:n}=we(o);return e({focus:f}),(r,k)=>{const m=D("font-awesome-icon");return p(),L("div",{class:d(r.$style.searchContainer),"data-test-id":"search-bar"},[N("div",{class:d({[r.$style.prefix]:!0,[r.$style.active]:r.modelValue.length>0})},[O(m,{icon:"search",size:"sm"})],2),N("div",{class:d(r.$style.text)},[N("input",{ref_key:"inputRef",ref:n,placeholder:r.placeholder,value:r.modelValue,class:d(r.$style.input),autofocus:"","data-test-id":"node-creator-search-bar",tabindex:"0",onInput:y},null,42,St)],2),r.modelValue.length>0?(p(),L("div",{key:0,class:d(r.$style.suffix),onClick:g},[N("button",{class:d([r.$style.clear,r.$style.clickable])},[O(m,{icon:"times-circle"})],2)],2)):V("",!0)],2)}}}),Lt="_searchContainer_dci3d_1",Et="_prefix_dci3d_17",Rt="_active_dci3d_22",Vt="_text_dci3d_26",Mt="_suffix_dci3d_42",Ot="_clear_dci3d_48",Bt={searchContainer:Lt,prefix:Et,active:Rt,text:Vt,suffix:Mt,clear:Ot},Pt={$style:Bt},Dt=U(At,[["__cssModules",Pt]]),Kt=["innerHTML"],Ht=H({__name:"NodeItem",props:{nodeType:{},subcategory:{default:void 0},active:{type:Boolean,default:!1}},setup(i){const e=i,u=pe(),s=se(),{actions:o}=Q(),{getAddedNodesAndConnections:v}=Te(),{isSubNodeType:f}=Ze({nodeType:e.nodeType}),y=J(!1),g=J({x:-100,y:-100}),n=J(null),r=b(()=>e.subcategory===Qe&&!e.nodeType.name.startsWith(xe)?"":u.headerText({key:`headers.${B.value}.description`,fallback:e.nodeType.description})),k=b(()=>t.value),m=b(()=>t.value?"node-creator-action-item":"node-creator-node-item"),t=b(()=>h.value.length>1),h=b(()=>o[e.nodeType.name]||[]),B=b(()=>u.shortNodeType(e.nodeType.name)||""),l=b(()=>({top:`${g.value.y}px`,left:`${g.value.x}px`})),S=b(()=>et(e.nodeType.name)),_=b(()=>{const c=e.nodeType.displayName.trimEnd();return u.headerText({key:`headers.${B.value}.displayName`,fallback:t.value?c.replace("Trigger",""):c})}),a=b(()=>e.nodeType.group.includes("trigger")&&!t.value);function T(c){document.body.addEventListener("dragover",E);const{pageX:M,pageY:R}=c;c.dataTransfer&&(c.dataTransfer.effectAllowed="copy",c.dataTransfer.dropEffect="copy",c.dataTransfer.setDragImage(n.value,0,0),c.dataTransfer.setData(ke,JSON.stringify(v([{type:e.nodeType.name}])))),y.value=!0,g.value={x:M,y:R}}function E(c){if(!y.value||c.pageX===0&&c.pageY===0)return;const[M,R]=Ae([],[c.pageX-ce/2,c.pageY-ce/2]);g.value={x:M,y:R}}function A(){document.body.removeEventListener("dragover",E),y.value=!1,setTimeout(()=>{g.value={x:-100,y:-100}},300)}function K(c){c.target.localName==="a"&&s.track("user clicked cnr docs link",{source:"nodes panel node"})}return(c,M)=>{const R=D("n8n-node-creator-node");return p(),C(R,{draggable:!k.value,class:d(c.$style.nodeItem),description:r.value,title:_.value,"show-action-arrow":k.value,"is-trigger":a.value,"data-test-id":m.value,tag:c.nodeType.tag,onDragstart:T,onDragend:A},de({icon:I(()=>[z(f)?(p(),L("div",{key:0,class:d(c.$style.subNodeBackground)},null,2)):V("",!0),O(le,{class:d(c.$style.nodeIcon),"node-type":c.nodeType},null,8,["class","node-type"])]),dragContent:I(()=>[N("div",{ref_key:"draggableDataTransfer",ref:n,class:d(c.$style.draggableDataTransfer)},null,2),Oe(N("div",{class:d(c.$style.draggable),style:Ce(l.value)},[O(le,{"node-type":c.nodeType,size:40,shrink:!1,onClickCapture:M[0]||(M[0]=me(()=>{},["stop"]))},null,8,["node-type"])],6),[[Be,y.value]])]),_:2},[S.value?{name:"tooltip",fn:I(()=>[N("p",{class:d(c.$style.communityNodeIcon),onClick:K,innerHTML:z(u).baseText("generic.communityNode.tooltip",{interpolate:{packageName:c.nodeType.name.split(".")[0],docURL:z(tt)}})},null,10,Kt)]),key:"0"}:void 0]),1032,["draggable","class","description","title","show-action-arrow","is-trigger","data-test-id","tag"])}}}),Ut="_nodeItem_124lg_1",zt="_nodeIcon_124lg_9",qt="_subNodeBackground_124lg_13",Yt="_communityNodeIcon_124lg_23",Wt="_draggable_124lg_27",jt="_draggableDataTransfer_124lg_41",Ft={nodeItem:Ut,nodeIcon:zt,subNodeBackground:qt,communityNodeIcon:Yt,draggable:Wt,draggableDataTransfer:jt},Gt={$style:Ft},Xt=U(Ht,[["__cssModules",Gt]]),Jt=H({__name:"SubcategoryItem",props:{item:{}},setup(i){const e=i,u=pe(),s=b(()=>qe(e.item.subcategory||e.item.title));return(o,v)=>{const f=D("n8n-node-icon"),y=D("n8n-node-creator-node");return p(),C(y,{class:d(o.$style.subCategory),title:z(u).baseText(`nodeCreator.subcategoryNames.${s.value}`),"is-trigger":!1,description:z(u).baseText(`nodeCreator.subcategoryDescriptions.${s.value}`),"show-action-arrow":!0},{icon:I(()=>[O(f,oe({type:"icon",name:o.item.icon,circle:!1,"show-tooltip":!1},o.item.iconProps),null,16,["name"])]),_:1},8,["class","title","description"])}}}),Zt="_subCategory_qrigt_1",Qt={subCategory:Zt},xt={$style:Qt},eo=U(Jt,[["__cssModules",xt]]),to=["textContent"],oo=H({__name:"LabelItem",props:{item:{}},setup(i){return(e,u)=>(p(),L("div",{class:d(e.$style.label)},[N("span",{class:d(e.$style.name),textContent:W(e.item.key)},null,10,to)],2))}}),no="_label_7jmhw_1",so={label:no},ao={$style:so},ro=U(oo,[["__cssModules",ao]]),io=H({__name:"ActionItem",props:{nodeType:{},action:{}},setup(i){const e=i,u=se(),{getActionData:s,getAddedNodesAndConnections:o,setAddedNodeActionParameters:v}=Te(),{activeViewStack:f}=P(),y=$e({dragging:!1,draggablePosition:{x:-100,y:-100},storeWatcher:null,draggableDataTransfer:null}),g=b(()=>({top:`${y.draggablePosition.y}px`,left:`${y.draggablePosition.x}px`})),n=b(()=>s(e.action)),r=l=>{var S;return((S=l.name)==null?void 0:S.toLowerCase().includes("trigger"))||l.name===Le};function k(l){document.body.addEventListener("dragover",m);const{pageX:S,pageY:_}=l;l.dataTransfer&&n.value.key&&(l.dataTransfer.effectAllowed="copy",l.dataTransfer.dropEffect="copy",l.dataTransfer.setDragImage(y.draggableDataTransfer,0,0),l.dataTransfer.setData(ke,JSON.stringify(o([{type:n.value.key}]))),u&&(y.storeWatcher=v(n.value,u,f.rootView)),document.body.addEventListener("dragend",t)),y.dragging=!0,y.draggablePosition={x:S,y:_}}function m(l){if(!y.dragging||l.pageX===0&&l.pageY===0)return;const[S,_]=Ae([],[l.pageX-ce/2,l.pageY-ce/2]);y.draggablePosition={x:S,y:_}}function t(){y.storeWatcher&&y.storeWatcher(),document.body.removeEventListener("dragend",t),document.body.removeEventListener("dragover",m),y.dragging=!1,setTimeout(()=>{y.draggablePosition={x:-100,y:-100}},300)}const{draggableDataTransfer:h,dragging:B}=we(y);return(l,S)=>{const _=D("n8n-node-creator-node");return p(),C(_,{draggable:"",class:d(l.$style.action),title:l.action.displayName,"is-trigger":r(l.action),"data-keyboard-nav":"true",onDragstart:k,onDragend:t},{dragContent:I(()=>[N("div",{ref_key:"draggableDataTransfer",ref:h,class:d(l.$style.draggableDataTransfer)},null,2),Oe(N("div",{class:d(l.$style.draggable),style:Ce(g.value)},[O(le,{"node-type":l.nodeType,size:40,shrink:!1,onClickCapture:S[0]||(S[0]=me(()=>{},["stop"]))},null,8,["node-type"])],6),[[Be,z(B)]])]),icon:I(()=>[O(le,{"node-type":l.action},null,8,["node-type"])]),_:1},8,["class","title","is-trigger"])}}}),lo="_action_139su_1",co="_nodeIcon_139su_13",uo="_draggable_139su_17",po="_draggableDataTransfer_139su_31",go={action:lo,nodeIcon:co,draggable:uo,draggableDataTransfer:po},yo={$style:go},mo=U(io,[["__cssModules",yo]]),_o=H({__name:"ViewItem",props:{view:{}},setup(i){return(e,u)=>{const s=D("n8n-node-icon"),o=D("n8n-node-creator-node");return p(),C(o,{class:d(e.$style.view),title:e.view.title,tag:e.view.tag,"is-trigger":!1,description:e.view.description,"show-action-arrow":!0},{icon:I(()=>[O(s,{type:"icon",name:e.view.icon,circle:!1,"show-tooltip":!1},null,8,["name"])]),_:1},8,["class","title","tag","description"])}}}),fo="_view_71tui_1",vo={view:fo},ho={$style:vo},bo=U(_o,[["__cssModules",ho]]),ko=H({__name:"LinkItem",props:{link:{}},setup(i){return(e,u)=>{const s=D("n8n-node-icon"),o=D("n8n-node-creator-node");return p(),C(o,{class:d(e.$style.creatorLink),title:e.link.title,"is-trigger":!1,description:e.link.description,tag:e.link.tag,"show-action-arrow":!0},{icon:I(()=>[O(s,{type:"icon",name:e.link.icon,circle:!1,"show-tooltip":!1},null,8,["name"])]),_:1},8,["class","title","description","tag"])}}}),$o="_creatorLink_1hx0p_1",wo={creatorLink:$o},Co={$style:wo},To=U(ko,[["__cssModules",Co]]),No=["textContent"],Io=H({__name:"CategoryItem",props:{expanded:{type:Boolean,default:!0},active:{type:Boolean},count:{},name:{},isTrigger:{type:Boolean}},setup(i){const e=i,u=b(()=>{const s=e.count||0;return s>0?`${e.name} (${s})`:e.name});return(s,o)=>{const v=D("font-awesome-icon");return p(),L("div",oe({class:s.$style.categoryWrapper},s.$attrs,{"data-keyboard-nav":"true","data-test-id":"node-creator-category-item"}),[N("div",{class:d({[s.$style.category]:!0,[s.$style.active]:s.active})},[N("span",{class:d(s.$style.name)},[N("span",{textContent:W(u.value)},null,8,No),s.isTrigger?(p(),C(v,{key:0,icon:"bolt",size:"xs",class:d(s.$style.triggerIcon)},null,8,["class"])):V("",!0),G(s.$slots,"default")],2),s.expanded?(p(),C(v,{key:0,icon:"chevron-down",class:d(s.$style.arrow)},null,8,["class"])):(p(),C(v,{key:1,class:d(s.$style.arrow),icon:"chevron-up"},null,8,["class"]))],2)],16)}}}),So="_triggerIcon_b4ocq_1",Ao="_category_b4ocq_6",Lo="_active_b4ocq_27",Eo="_name_b4ocq_31",Ro="_arrow_b4ocq_36",Vo={triggerIcon:So,category:Ao,active:Lo,name:Eo,arrow:Ro},Mo={$style:Vo},Oo=U(Io,[["__cssModules",Mo]]),Bo=["data-category-collapsed"],Po=["innerHTML"],Do=H({__name:"CategorizedItemsRenderer",props:{elements:{default:()=>[]},category:{},disabled:{type:Boolean},activeIndex:{},isTriggerCategory:{type:Boolean},mouseOverTooltip:{},expanded:{type:Boolean}},setup(i){const e=i,u=se(),{popViewStack:s}=P(),{registerKeyHook:o}=X(),{workflowId:v}=ot(),f=b(()=>{var t;return(t=X())==null?void 0:t.activeItemId}),y=b(()=>e.elements.filter(({type:t})=>t==="action").length),g=J(e.expanded??!1);function n(){r(!g.value)}function r(t){g.value=t,g.value&&u.trackNodesPanel("nodeCreateList.onCategoryExpanded",{category_name:e.category,workflow_id:v})}function k(){g.value||r(!0)}function m(){if(!g.value){s();return}r(!1)}return Z(()=>e.elements,()=>{r(!0)}),o(`CategoryRight_${e.category}`,{keyboardKeys:["ArrowRight"],condition:(t,h)=>t==="category"&&e.category===h,handler:k}),o(`CategoryToggle_${e.category}`,{keyboardKeys:["Enter"],condition:(t,h)=>t==="category"&&e.category===h,handler:n}),o(`CategoryLeft_${e.category}`,{keyboardKeys:["ArrowLeft"],condition:(t,h)=>t==="category"&&e.category===h,handler:m}),(t,h)=>{const B=D("n8n-icon"),l=D("n8n-tooltip");return p(),L("div",{class:d(t.$style.categorizedItemsRenderer),"data-category-collapsed":!g.value},[O(Oo,{class:d(t.$style.categoryItem),name:t.category,disabled:t.disabled,active:f.value===t.category,count:y.value,expanded:g.value,"is-trigger":t.isTriggerCategory,"data-keyboard-nav-type":"category","data-keyboard-nav-id":t.category,onClick:n},{default:I(()=>[t.mouseOverTooltip?(p(),L("span",{key:0,class:d(t.$style.mouseOverTooltip)},[O(l,{placement:"top","popper-class":t.$style.tooltipPopper},{content:I(()=>[N("div",{innerHTML:t.mouseOverTooltip},null,8,Po)]),default:I(()=>[O(B,{icon:"question-circle",size:"small"})]),_:1},8,["popper-class"])],2)):V("",!0)]),_:1},8,["class","name","disabled","active","count","expanded","is-trigger","data-keyboard-nav-id"]),g.value&&y.value>0&&t.$slots.default?(p(),L("div",{key:0,class:d(t.$style.contentSlot)},[G(t.$slots,"default")],2)):V("",!0),g.value?(p(),C(Ne,oe({key:1},t.$attrs,{elements:t.elements,"is-trigger":t.isTriggerCategory}),{default:I(()=>[]),empty:I(()=>[G(t.$slots,"empty",Pe(yt({elements:t.elements})))]),_:3},16,["elements","is-trigger"])):V("",!0)],10,Bo)}}}),Ko="_mouseOverTooltip_1smyb_1",Ho="_categorizedItemsRenderer_1smyb_9",Uo="_tooltipPopper_1smyb_13",zo="_contentSlot_1smyb_17",qo={mouseOverTooltip:Ko,categorizedItemsRenderer:Ho,tooltipPopper:Uo,contentSlot:zo},Yo={$style:qo},ue=U(Do,[["__cssModules",Yo]]),Wo={key:0},jo=["data-keyboard-nav-type","data-keyboard-nav-id","onClick"],Fo=20,Go=5,Xo=H({__name:"ItemsRenderer",props:{elements:{default:()=>[]},activeIndex:{},disabled:{type:Boolean},lazyRender:{type:Boolean,default:!0}},emits:["selected","dragstart","dragend"],setup(i,{emit:e}){const u=i,s=e,o=J([]),v=J(0),f=b(()=>{var t;return(t=X())==null?void 0:t.activeItemId});function y(){if(u.elements.length<=Fo||!u.lazyRender){o.value=u.elements;return}o.value.length<u.elements.length&&(o.value.push(...u.elements.slice(o.value.length,o.value.length+Go)),v.value=window.requestAnimationFrame(y))}function g(t,h,B){if(!u.disabled)switch(t){case"dragstart":case"dragend":case"selected":s("selected",h,B);break;default:s(t,h,B)}}function n(t){t.style.height="0"}function r(t){t.style.height=`${t.scrollHeight}px`}function k(t){t.style.height=`${t.scrollHeight}px`}function m(t){t.style.height="0"}return ye(()=>{y()}),De(()=>{window.cancelAnimationFrame(v.value),o.value=[]}),Z(()=>u.elements,()=>{window.cancelAnimationFrame(v.value),o.value=[],y()}),(t,h)=>{const B=D("n8n-loading");return t.elements.length>0?(p(),L("div",{key:0,class:d(t.$style.itemsRenderer),name:"accordion",onBeforeEnter:n,onEnter:r,onBeforeLeave:k,onLeave:m},[G(t.$slots,"default"),(p(!0),L(mt,null,_t(t.elements,l=>(p(),L("div",{key:l.uuid},[o.value.includes(l)?(p(),L("div",Wo,[l.type==="section"?(p(),C(ue,{key:0,elements:l.children,expanded:"",category:l.title,onSelected:h[0]||(h[0]=S=>g("selected",S))},null,8,["elements","category"])):(p(),L("div",{key:1,ref_for:!0,ref:"iteratorItems",class:d({clickable:!t.disabled,[t.$style.active]:f.value===l.uuid,[t.$style.iteratorItem]:!0,[t.$style[l.type]]:!0,[t.$style.borderless]:l.type==="view"&&l.properties.borderless===!0}),"data-test-id":"item-iterator-item","data-keyboard-nav-type":l.type!=="label"?l.type:void 0,"data-keyboard-nav-id":l.uuid,onClick:S=>g("selected",l)},[l.type==="label"?(p(),C(ro,{key:0,item:l},null,8,["item"])):V("",!0),l.type==="subcategory"?(p(),C(eo,{key:1,item:l.properties},null,8,["item"])):V("",!0),l.type==="node"?(p(),C(Xt,{key:2,"node-type":l.properties,active:!0,subcategory:l.subcategory},null,8,["node-type","subcategory"])):V("",!0),l.type==="action"?(p(),C(mo,{key:3,"node-type":l.properties,action:l.properties,active:!0},null,8,["node-type","action"])):l.type==="view"?(p(),C(bo,{key:4,view:l.properties,class:d(t.$style.viewItem)},null,8,["view","class"])):l.type==="link"?(p(),C(To,{key:5,link:l.properties,class:d(t.$style.linkItem)},null,8,["link","class"])):V("",!0)],10,jo))])):(p(),C(B,{key:1,loading:!0,rows:1,variant:"p",class:d(t.$style.itemSkeleton)},null,8,["class"]))]))),128))],34)):(p(),L("div",{key:1,class:d(t.$style.empty)},[G(t.$slots,"empty")],2))}}}),Jo="_itemSkeleton_1rgyl_1",Zo="_iteratorItem_1rgyl_5",Qo="_label_1rgyl_17",xo="_category_1rgyl_17",en="_active_1rgyl_20",tn="_empty_1rgyl_24",on="_itemsRenderer_1rgyl_28",nn="_view_1rgyl_37",sn="_link_1rgyl_55",an="_borderless_1rgyl_73",rn={itemSkeleton:Jo,iteratorItem:Zo,label:Qo,category:xo,active:en,empty:tn,itemsRenderer:on,view:nn,link:sn,borderless:an},ln={$style:rn},Ne=U(Xo,[["__cssModules",ln]]),cn=["innerHTML"],dn=["innerHTML"],un=["innerHTML"],pn=["innerHTML"],gn=["innerHTML"],yn=H({__name:"ActionsMode",emits:{nodeTypeSelected:i=>!0},setup(i,{emit:e}){const u=e,s=se(),{userActivated:o}=nt(),{popViewStack:v,updateCurrentViewStack:f}=P(),{registerKeyHook:y}=X(),{setAddedNodeActionParameters:g,getActionData:n,getPlaceholderTriggerActions:r,parseCategoryActions:k,actionsCategoryLocales:m}=Te(),t=b(()=>R(_.value,m.value.triggers,!1)),h=b(()=>R(_.value,m.value.actions,!a.value)),B=b(()=>R(P().activeViewStack.baselineItems||[],m.value.triggers,!1)),l=b(()=>R(P().activeViewStack.baselineItems||[],m.value.actions,!a.value)),S=b(()=>t.value.length||a.value?m.value.triggers:`${m.value.triggers} (${A.length})`),_=b(()=>(P().activeViewStack.items||[]).filter($=>$.properties.actionKey!==ie)),a=b(()=>P().activeViewStack.search),T=b(()=>P().activeViewStack.subcategory),E=b(()=>P().activeViewStack.rootView),A=r(T.value||""),K=b(()=>k(P().activeViewStack.baselineItems||[],m.value.triggers,!a.value).length===0),c=b(()=>(P().activeViewStack.baselineItems||[]).some(q=>(q.properties.actionKey??"")===ie)),M=b(()=>E.value===te);y("ActionsKeyRight",{keyboardKeys:["ArrowRight","Enter"],condition:$=>$==="action",handler:We}),y("ActionsKeyLeft",{keyboardKeys:["ArrowLeft"],condition:$=>$==="action",handler:fe});function R($,w,q=!1){return k($,w,q)}function fe(){v()}function We($){const q=[..._.value,...A].find(Y=>Y.uuid===$);q&&ae(q)}function ae($){var Y,F;if($.type!=="action")return;const w=n($.properties);if(A.some(j=>j.key===$.key)&&M.value){const j=_.value[0].key;u("nodeTypeSelected",[w.key,j])}else w.key===st&&((Y=w==null?void 0:w.value)==null?void 0:Y.resource)==="assistant"&&((F=w==null?void 0:w.value)==null?void 0:F.operation)==="message"?u("nodeTypeSelected",[at]):u("nodeTypeSelected",[w.key]);s&&g(w,s,E.value)}function je(){var F,j,Se;const $=P().activeViewStack,w=(F=$.baselineItems||[])==null?void 0:F.filter(ve=>ve.key.toLowerCase().includes("trigger")).length,Y={app_identifier:[..._.value,...A][0].key,actions:(j=$.baselineItems||[])==null?void 0:j.map(ve=>ve.properties.displayName),regular_action_count:((Se=$.baselineItems||[])==null?void 0:Se.length)-w,trigger_action_count:w};be().run("nodeCreateList.onViewActions",Y),s==null||s.trackNodesPanel("nodeCreateList.onViewActions",Y)}function Ie(){f({search:""})}function Fe(){const $={name:"",key:re,value:{authentication:"predefinedCredentialType"}};u("nodeTypeSelected",[re]),s&&g($);const w=_.value[0].key;be().run("nodeCreateList.onActionsCustmAPIClicked",{app_identifier:w}),s==null||s.trackNodesPanel("nodeCreateList.onActionsCustmAPIClicked",{app_identifier:w})}const Ge=H({props:{rootView:{type:String,required:!0}},setup($,{slots:w}){return()=>{var q,Y,F,j;return ft("div",{},$.rootView===ge?[(q=w.actions)==null?void 0:q.call(w),(Y=w.triggers)==null?void 0:Y.call(w)]:[(F=w.triggers)==null?void 0:F.call(w),(j=w.actions)==null?void 0:j.call(w)])}}});return ye(()=>{je()}),($,w)=>{const q=D("n8n-callout"),Y=D("n8n-info-tip");return p(),L("div",{class:d($.$style.container)},[E.value?(p(),C(z(Ge),{key:0,"root-view":E.value},de({_:2},[M.value||B.value.length!==0?{name:"triggers",fn:I(()=>[O(ue,{elements:t.value,category:S.value,"mouse-over-tooltip":$.$locale.baseText("nodeCreator.actionsTooltip.triggersStartWorkflow"),"is-trigger-category":"",expanded:M.value||h.value.length===0,onSelected:ae},de({_:2},[K.value?{name:"empty",fn:I(()=>[K.value?(p(),C(q,{key:0,theme:"info",iconless:"",slim:"","data-test-id":"actions-panel-no-triggers-callout"},{default:I(()=>[N("span",{innerHTML:$.$locale.baseText("nodeCreator.actionsCallout.noTriggerItems",{interpolate:{nodeName:T.value??""}})},null,8,cn)]),_:1})):V("",!0),O(Ne,{elements:z(A),onSelected:ae},null,8,["elements"])]),key:"0"}:{name:"empty",fn:I(()=>[N("p",{class:d($.$style.resetSearch),onClick:Ie,innerHTML:$.$locale.baseText("nodeCreator.actionsCategory.noMatchingTriggers")},null,10,["innerHTML"])]),key:"1"}]),1032,["elements","category","mouse-over-tooltip","expanded"])]),key:"0"}:void 0,!M.value||l.value.length!==0?{name:"actions",fn:I(()=>[O(ue,{elements:h.value,category:z(m).actions,"mouse-over-tooltip":$.$locale.baseText("nodeCreator.actionsTooltip.actionsPerformStep"),expanded:!M.value||t.value.length===0,onSelected:ae},{empty:I(()=>[a.value?(p(),L("p",{key:1,class:d($.$style.resetSearch),"data-test-id":"actions-panel-no-matching-actions",onClick:Ie,innerHTML:$.$locale.baseText("nodeCreator.actionsCategory.noMatchingActions")},null,10,pn)):(p(),C(Y,{key:0,theme:"info",type:"note",class:d($.$style.actionsEmpty)},{default:I(()=>[N("span",{innerHTML:$.$locale.baseText("nodeCreator.actionsCallout.noActionItems",{interpolate:{nodeName:T.value??""}})},null,8,un)]),_:1},8,["class"]))]),default:I(()=>[!z(o)&&M.value?(p(),C(q,{key:0,theme:"info",iconless:"",slim:"","data-test-id":"actions-panel-activation-callout"},{default:I(()=>[N("span",{innerHTML:$.$locale.baseText("nodeCreator.actionsCallout.triggersStartWorkflow")},null,8,dn)]),_:1})):V("",!0)]),_:1},8,["elements","category","mouse-over-tooltip","expanded"])]),key:"1"}:void 0]),1032,["root-view"])):V("",!0),c.value?(p(),L("div",{key:1,class:d($.$style.apiHint)},[N("span",{onClick:me(Fe,["prevent"]),innerHTML:$.$locale.baseText("nodeCreator.actionsList.apiCall",{interpolate:{node:T.value??""}})},null,8,gn)],2)):V("",!0)],2)}}}),mn="_container_25ezu_1",_n="_resetSearch_25ezu_7",fn="_actionsEmpty_25ezu_21",vn="_apiHint_25ezu_29",hn={container:mn,resetSearch:_n,actionsEmpty:fn,apiHint:vn},bn={$style:hn},kn=U(yn,[["__cssModules",bn]]),$n={},wn={width:"75px",height:"75px",viewBox:"0 0 75 75",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Cn=vt('<title>no-nodes-keyart</title><g id="Nodes-panel-prototype-V2.1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="nodes-panel-(component)" transform="translate(-2085.000000, -352.000000)"><g id="nodes_panel" transform="translate(1880.000000, 151.000000)"><g id="Panel" transform="translate(50.000000, 0.000000)"><g id="Group-3" transform="translate(105.000000, 171.000000)"><g id="no-nodes-keyart" transform="translate(50.000000, 30.000000)"><rect id="Rectangle" x="0" y="0" width="75" height="75"></rect><g id="Group" transform="translate(6.562500, 8.164062)" fill="#C4C8D1" fill-rule="nonzero"><polygon id="Rectangle" transform="translate(49.192016, 45.302553) rotate(-45.000000) translate(-49.192016, -45.302553) " points="44.5045606 32.0526802 53.8794707 32.0526802 53.8794707 58.5524261 44.5045606 58.5524261"></polygon><path id="Path" d="M48.125,23.0859375 C54.15625,23.0859375 59.0625,18.1796875 59.0625,12.1484375 C59.0625,10.3359375 58.5625,8.6484375 57.78125,7.1484375 L49.34375,15.5859375 L44.6875,10.9296875 L53.125,2.4921875 C51.625,1.7109375 49.9375,1.2109375 48.125,1.2109375 C42.09375,1.2109375 37.1875,6.1171875 37.1875,12.1484375 C37.1875,13.4296875 37.4375,14.6484375 37.84375,15.7734375 L32.0625,21.5546875 L26.5,15.9921875 L28.71875,13.7734375 L24.3125,9.3671875 L30.9375,2.7421875 C27.28125,-0.9140625 21.34375,-0.9140625 17.6875,2.7421875 L6.625,13.8046875 L11.03125,18.2109375 L2.21875,18.2109375 L1.38777878e-15,20.4296875 L11.0625,31.4921875 L13.28125,29.2734375 L13.28125,20.4296875 L17.6875,24.8359375 L19.90625,22.6171875 L25.46875,28.1796875 L2.3125,51.3359375 L8.9375,57.9609375 L44.5,22.4296875 C45.625,22.8359375 46.84375,23.0859375 48.125,23.0859375 Z"></path></g></g></g></g></g></g></g>',2),Tn=[Cn];function Nn(i,e){return p(),L("svg",wn,Tn)}const In=U($n,[["render",Nn]]),Sn=["textContent"],An=["textContent"],Ln=H({__name:"NoResults",props:{showIcon:{type:Boolean},showRequest:{type:Boolean},rootView:{}},setup(i){return(e,u)=>{const s=D("n8n-link"),o=D("font-awesome-icon");return p(),L("div",{class:d({[e.$style.noResults]:!0,[e.$style.iconless]:!e.showIcon}),"data-test-id":"node-creator-no-results"},[e.showIcon?(p(),L("div",{key:0,class:d(e.$style.icon)},[O(In)],2)):V("",!0),N("div",{class:d(e.$style.title)},[G(e.$slots,"title"),N("p",{textContent:W(e.$locale.baseText("nodeCreator.noResults.weDidntMakeThatYet"))},null,8,Sn),N("div",{class:d(e.$style.action)},[ee(W(e.$locale.baseText("nodeCreator.noResults.dontWorryYouCanProbablyDoItWithThe"))+" ",1),e.rootView===z(ge)?(p(),C(s,{key:0,onClick:u[0]||(u[0]=v=>e.$emit("addHttpNode"))},{default:I(()=>[ee(W(e.$locale.baseText("nodeCreator.noResults.httpRequest")),1)]),_:1})):V("",!0),e.rootView===z(te)?(p(),C(s,{key:1,onClick:u[1]||(u[1]=v=>e.$emit("addWebhookNode"))},{default:I(()=>[ee(W(e.$locale.baseText("nodeCreator.noResults.webhook")),1)]),_:1})):V("",!0),ee(" "+W(e.$locale.baseText("nodeCreator.noResults.node")),1)],2)],2),e.showRequest?(p(),L("div",{key:1,class:d(e.$style.request)},[N("p",{textContent:W(e.$locale.baseText("nodeCreator.noResults.wantUsToMakeItFaster"))},null,8,An),N("div",null,[O(s,{to:z(rt)},{default:I(()=>[N("span",null,W(e.$locale.baseText("nodeCreator.noResults.requestTheNode")),1),ee("  "),N("span",null,[O(o,{class:d(e.$style.external),icon:"external-link-alt",title:e.$locale.baseText("nodeCreator.noResults.requestTheNode")},null,8,["class","title"])])]),_:1},8,["to"])])],2)):V("",!0)],2)}}}),En="_noResults_8axui_1",Rn="_title_8axui_14",Vn="_action_8axui_23",Mn="_request_8axui_24",On="_icon_8axui_40",Bn="_external_8axui_46",Pn={noResults:En,title:Rn,action:Vn,request:Mn,icon:On,external:Bn},Dn={$style:Pn},Kn=U(Ln,[["__cssModules",Dn]]),Hn=H({__name:"NodesMode",emits:{nodeTypeSelected:i=>!0},setup(i,{emit:e}){const u=e,s=pe(),o=se(),{mergedNodes:v,actions:f}=Q(),{baseUrl:y}=it(),{pushViewStack:g,popViewStack:n}=P(),{registerKeyHook:r}=X(),k=b(()=>P().activeViewStack),m=b(()=>P().globalSearchItemsDiff);function t(a){u("nodeTypeSelected",a)}function h(a){var T,E,A;if(a.type==="subcategory"){const K=qe(a.properties.title),c=s.baseText(`nodeCreator.subcategoryNames.${K}`);g({subcategory:a.key,title:c,mode:"nodes",...a.properties.icon?{nodeIcon:{icon:a.properties.icon,iconType:"icon"}}:{},...a.properties.panelClass?{panelClass:a.properties.panelClass}:{},rootView:k.value.rootView,forceIncludeNodes:a.properties.forceIncludeNodes,baseFilter:l,itemsMapper:B,sections:a.properties.sections}),o.trackNodesPanel("nodeCreateList.onSubcategorySelected",{subcategory:a.key})}if(a.type==="node"){const K=(f==null?void 0:f[a.key])||[];if(K.length<=1){t([a.key]);return}const c=a.properties.iconUrl?`${y}${a.properties.iconUrl}`:(T=a.properties.icon)==null?void 0:T.split(":")[1],M=K==null?void 0:K.map(R=>pt(R,a.properties.displayName,"action"));g({subcategory:a.properties.displayName,title:a.properties.displayName,nodeIcon:{color:(A=(E=a.properties.defaults)==null?void 0:E.color)==null?void 0:A.toString(),icon:c,iconType:a.properties.iconUrl?"file":"icon"},rootView:k.value.rootView,hasSearch:!0,mode:"actions",items:M})}if(a.type==="view"){const K={[te]:Ke,[ge]:He,[Ee]:Ue,[Re]:ze},c=a.key,M=K[c];if(!M){console.warn(`No view found for ${c}`);return}const R=M(v);g({title:R.title,subtitle:(R==null?void 0:R.subtitle)??"",info:(R==null?void 0:R.info)??"",items:R.items,hasSearch:!0,rootView:R.value,mode:"nodes",searchItems:v})}a.type==="link"&&(window.open(a.properties.url,"_blank"),o.trackNodesPanel("nodeCreateList.onLinkSelected",{link:a.properties.url}))}function B(a){var K,c;if(a.type!=="node")return a;const T=a.properties.group.includes("trigger"),A=((f==null?void 0:f[a.key])||[]).length>0;return T&&A&&((K=a.properties)!=null&&K.codex&&(a.properties.codex.alias=[...((c=a.properties.codex)==null?void 0:c.alias)||[],a.properties.displayName]),a.properties.displayName=a.properties.displayName.replace(" Trigger","")),a}function l(a){if(a.type==="section")return!0;if(a.type!=="node")return!1;const T=a.properties.group.includes("trigger"),A=((f==null?void 0:f[a.key])||[]).length>0;return k.value.rootView===te?A||T:A||!T}function S(){n()}function _(a){const E=gt([...k.value.items??[],...m.value??[]]).find(A=>A.uuid===a);E&&h(E)}return r("MainViewArrowRight",{keyboardKeys:["ArrowRight","Enter"],condition:a=>["subcategory","node","link","view"].includes(a),handler:_}),r("MainViewArrowLeft",{keyboardKeys:["ArrowLeft"],condition:a=>["subcategory","node","link","view"].includes(a),handler:S}),(a,T)=>(p(),L("span",null,[O(Ne,{elements:k.value.items,class:d(a.$style.items),onSelected:h},de({_:2},[(k.value.items||[]).length===0&&m.value.length===0?{name:"empty",fn:I(()=>[O(Kn,{"root-view":k.value.rootView,"show-icon":"","show-request":"",onAddWebhookNode:T[0]||(T[0]=E=>t([z(Le)])),onAddHttpNode:T[1]||(T[1]=E=>t([z(re)]))},null,8,["root-view"])]),key:"0"}:void 0]),1032,["elements","class"]),m.value.length>0?(p(),C(ue,{key:0,elements:m.value,category:a.$locale.baseText("nodeCreator.categoryNames.otherCategories"),onSelected:h},null,8,["elements","category"])):V("",!0)]))}}),Un="_items_1mzys_1",zn={items:Un},qn={$style:zn},Yn=U(Hn,[["__cssModules",qn]]),Wn=["textContent"],jn=["textContent"],Fn=H({__name:"NodesListPanel",setup(i){const e=pe(),{mergedNodes:u}=Q(),{pushViewStack:s,popViewStack:o,updateCurrentViewStack:v}=P(),{setActiveItemIndex:f,attachKeydownEvent:y,detachKeydownEvent:g}=X(),n=b(()=>P().activeViewStack),r=b(()=>P().viewStacks),k=b(()=>P().activeViewStackMode==="actions"),m=b(()=>k.value?e.baseText("nodeCreator.actionsCategory.searchActions",{interpolate:{node:n.value.title}}):e.baseText("nodeCreator.searchBar.searchNodes")),t=b(()=>Q().selectedView);function h(_=""){return n.value.activeIndex?n.value.activeIndex:n.value.mode==="actions"?1:n.value.sections?_?0:1:0}function B(_){n.value.uuid&&(v({search:_}),f(h(_)))}function l(){f(h())}ye(()=>{y(),f(h())}),De(()=>{g()}),Z(()=>t.value,_=>{const a={[te]:Ke,[ge]:He,[Ee]:Ue,[Re]:ze},T=_,E=a[T];if(!E){console.warn(`No view found for ${T}`);return}const A=E(u);s({title:A.title,subtitle:(A==null?void 0:A.subtitle)??"",items:A.items,info:A.info,hasSearch:!0,mode:"nodes",rootView:_,searchItems:u})},{immediate:!0});function S(){o()}return(_,a)=>{const T=D("font-awesome-icon"),E=D("n8n-node-icon"),A=D("n8n-notice");return r.value.length>0?(p(),C(Ve,{key:0,name:`panel-slide-${n.value.transitionDirection}`,onAfterLeave:l},{default:I(()=>[(p(),L("aside",{key:`${n.value.uuid}`,class:d([_.$style.nodesListPanel,n.value.panelClass]),onKeydownCapture:a[0]||(a[0]=me(()=>{},["stop"]))},[N("header",{class:d({[_.$style.header]:!0,[_.$style.hasBg]:!n.value.subtitle,"nodes-list-panel-header":!0}),"data-test-id":"nodes-list-header"},[N("div",{class:d(_.$style.top)},[r.value.length>1&&!n.value.preventBack?(p(),L("button",{key:0,class:d(_.$style.backButton),onClick:S},[O(T,{class:d(_.$style.backButtonIcon),icon:"arrow-left",size:"2x"},null,8,["class"])],2)):V("",!0),n.value.nodeIcon?(p(),C(E,{key:1,class:d(_.$style.nodeIcon),type:n.value.nodeIcon.iconType||"unknown",src:n.value.nodeIcon.icon,name:n.value.nodeIcon.icon,color:n.value.nodeIcon.color,circle:!1,"show-tooltip":!1,size:20},null,8,["class","type","src","name","color"])):V("",!0),n.value.title?(p(),L("p",{key:2,class:d(_.$style.title),textContent:W(n.value.title)},null,10,Wn)):V("",!0)],2),n.value.subtitle?(p(),L("p",{key:0,class:d({[_.$style.subtitle]:!0,[_.$style.offsetSubtitle]:r.value.length>1}),textContent:W(n.value.subtitle)},null,10,jn)):V("",!0)],2),n.value.hasSearch?(p(),C(Dt,{key:0,class:d(_.$style.searchBar),placeholder:m.value?m.value:_.$locale.baseText("nodeCreator.searchBar.searchNodes"),"model-value":n.value.search,"onUpdate:modelValue":B},null,8,["class","placeholder","model-value"])):V("",!0),N("div",{class:d(_.$style.renderedItems)},[n.value.info&&!n.value.search?(p(),C(A,{key:0,class:d(_.$style.info),content:n.value.info,theme:"warning"},null,8,["class","content"])):V("",!0),k.value&&n.value.subcategory?(p(),C(kn,Pe(oe({key:1},_.$attrs)),null,16)):(p(),C(Yn,oe({key:2,"root-view":t.value},_.$attrs),null,16,["root-view"]))],2)],34))]),_:1},8,["name"])):V("",!0)}}}),Gn="_info_vhrjt_23",Xn="_backButton_vhrjt_27",Jn="_backButtonIcon_vhrjt_34",Zn="_nodeIcon_vhrjt_40",Qn="_renderedItems_vhrjt_45",xn="_searchBar_vhrjt_57",es="_nodesListPanel_vhrjt_61",ts="_footer_vhrjt_79",os="_top_vhrjt_90",ns="_header_vhrjt_95",ss="_hasBg_vhrjt_101",as="_title_vhrjt_106",rs="_subtitle_vhrjt_116",is="_offsetSubtitle_vhrjt_124",ls={info:Gn,backButton:Xn,backButtonIcon:Jn,nodeIcon:Zn,renderedItems:Qn,searchBar:xn,nodesListPanel:es,footer:ts,top:os,header:ns,hasBg:ss,title:as,subtitle:rs,offsetSubtitle:is},cs={$style:ls},ds=U(Fn,[["__cssModules",cs]]),us=H({__name:"NodeCreator",props:{active:{type:Boolean},onNodeTypeSelected:{type:Function}},emits:["closeNodeCreator","nodeTypeSelected"],setup(i,{emit:e}){const u=i,{resetViewStacks:s}=P(),{registerKeyHook:o}=X(),v=e,f=lt(),y=ct(),{setShowScrim:g,setActions:n,setMergeNodes:r}=Q(),{generateMergedNodesAndActions:k}=It(),m=$e({nodeCreator:null,mousedownInsideEvent:null}),t=b(()=>Q().showScrim),h=b(()=>P().viewStacks.length),B=b(()=>y.assistantChatOpen),l=b(()=>({top:`${f.bannersHeight+f.headerHeight}px`}));function S(){var c;if(m.mousedownInsideEvent){const M=new MouseEvent("click",{bubbles:!0,cancelable:!0});(c=m.mousedownInsideEvent.target)==null||c.dispatchEvent(M),m.mousedownInsideEvent=null,_()}}function _(){document.removeEventListener("mouseup",S),document.removeEventListener("touchstart",S)}function a(){m.mousedownInsideEvent=null,_()}function T(c){m.mousedownInsideEvent=c,document.addEventListener("mouseup",S),document.addEventListener("touchstart",S)}function E(c){c.preventDefault()}function A(c){if(!c.dataTransfer)return;const M=c.dataTransfer.getData(ke),R=m.nodeCreator.getBoundingClientRect();M&&c.pageX>=R.x&&c.pageY>=R.y&&c.stopPropagation()}Z(()=>u.active,c=>{c||(g(!1),s())}),Z(h,c=>{c===0&&(v("closeNodeCreator"),g(!1))}),o("NodeCreatorCloseEscape",{keyboardKeys:["Escape"],handler:()=>v("closeNodeCreator")}),o("NodeCreatorCloseTab",{keyboardKeys:["Tab"],handler:()=>v("closeNodeCreator")}),Z(()=>({httpOnlyCredentials:dt().httpOnlyCredentialTypes,nodeTypes:ut().visibleNodeTypes}),({nodeTypes:c,httpOnlyCredentials:M})=>{const{actions:R,mergedNodes:fe}=k(c,M);n(R),r(fe)},{immediate:!0});const{nodeCreator:K}=we(m);return Me(()=>{_()}),(c,M)=>(p(),L("div",null,[N("aside",{class:d({[c.$style.nodeCreatorScrim]:!0,[c.$style.active]:t.value})},null,2),O($t,null,{default:I(()=>[c.active?(p(),L("div",{key:0,ref_key:"nodeCreator",ref:K,class:d({[c.$style.nodeCreator]:!0,[c.$style.chatOpened]:B.value}),style:Ce(l.value),"data-test-id":"node-creator",onDragover:E,onDrop:A,onMousedown:T,onMouseup:a},[O(ds,{onNodeTypeSelected:c.onNodeTypeSelected},null,8,["onNodeTypeSelected"])],38)):V("",!0)]),_:1})]))}}),ps="_nodeCreator_1q30p_5",gs="_chatOpened_1q30p_15",ys="_nodeCreatorScrim_1q30p_19",ms="_active_1q30p_31",_s={nodeCreator:ps,chatOpened:gs,nodeCreatorScrim:ys,active:ms},fs={$style:_s},Js=U(us,[["__cssModules",fs]]);export{Js as default};
//# sourceMappingURL=NodeCreator-CRVECYnB.js.map
